     1  000000             CHIP		SN8P2501D
     2  000000             //{{SONIX_CODE_OPTION
     3  000000             	.Code_Option	Noise_Filter	Enable
     4  000000             	.Code_Option	Reset_Pin	P11
     5  000000             	.Code_Option	Watch_Dog	Disable
     6  000000             	.Code_Option	High_Clk	IHRC_RTC	;
     7  000000             	.Code_Option	Fcpu		#3     ; Fcpu = Fosc/8
     8  000000             	.Code_Option	Security	Enable
     9  000000             	.Code_Option	LVD		LVD_L		;
    10  000000             //}}SONIX_CODE_OPTION
    11  000000             
    12  E 0000002F         	END_RAM_ADDR	EQU	0X2F
    13  E 000000A1         	EER_ADD			EQU	0XA1	;10100001B
    14  E 000000A0         	EEW_ADD			EQU	0XA0	;10100000B
    15  E 00000030         	RAM_COUNT		EQU	48
    16  E 00000034         	TM_DATA_H		EQU	0X34	;ADDR OF THE TEMPEATURE	OF TM
    17  E 00000000         	TM_DATA_L		EQU	0X00
    18  E 00000078         	TIME_GAP		EQU	0X78	;0X78
    19  E 00000001         	T0_TDR			EQU	0X01
    20  E 0000003D         	TMR_ADD 		EQU	0X3D
    21  E 0000003C         	TMW_ADD			EQU	0X3C
    22  E 0000001F         	MAX_MEMH		EQU	0X1F
    23  E 000000DE         	MAX_MEML		EQU	0XDE
    24  E 0000001F         	LAST_TIME_EE_ADD_H EQU 0X1F
    25  E 000000FE         	LAST_TIME_EE_ADD_L EQU 0XFE
    26  E 0000001F         	LIVE_TIME_ADD_H		EQU	0X1F
    27  E 000000FC         	LIVE_TIME_ADD_L		EQU	0XFC
    28  E 00000001         	DEFAULT_FRONT_TIME_DELAY	EQU	0X01
    29  E 00000001         	DEFAULT_TIME_GAP	EQU	0X01
    30  E 00000030         	TM_INITIAL_TIME_ADD_H	EQU 0X30
    31  E 00000000         	TM_INITIAL_TIME_ADD_L	EQU 0X00
    32  E 00000031         	TM_TIME_H		EQU	0X31
    33  E 00000000         	TM_TIME_L		EQU	0X00
    34  E 0000001F         	EE_DELAY_ADD_H	EQU	0X1F
    35  E 000000F8         	EE_GAP_ADD_L	EQU	0XF8
    36  E 0000001F         	EE_INITIAL_TIME_ADD_H	EQU	0X1F
    37  E 000000FA         	EE_INITIAL_TIME_ADD_L	EQU	0XFA
    38  E 00000001         	WRITE_FLAG_H	EQU 0X01
    39  E 00000000         	WRITE_FLAG_L	EQU	0X00
    40  E 00000002         	DEFAULT_GAP_TIME_FLAGH EQU 0X02
    41  E 00000000         	DEFAULT_GAP_TIME_FLAGL EQU	0X00
    42  000000             .DATA
    43  000000             			ORG	0H
    44  0000 D             	DELAYTIME1	DS	1
    45  0001 D             	DELAYTIME2	DS	1
    46  0002 D             	TIMEOUT		DS	1
    47  0003 D             	TLC0		DS	1
    48  0004 D             	TLC1		DS	1
    49  0005 D             	TLC2		DS	1
    50  0006 D             	FLAG1		DS	1
    51  0007 D             	FLAG2		DS	1
    52  0008 D             	TIMEH		DS	1
    53  0009 D             	TIMEG		DS	1
    54  000A D             	DATA_IN		DS	1
    55  000B D             	DATA_OUT	DS	1
    56  000C D             	DATAH		DS	1
    57  000D D             	DATAL		DS	1
    58  000E D             	ADDRESSH	DS	1
    59  000F D             	ADDRESSL	DS	1
    60  0010 D             	CRCT1		DS	1
    61  0011 D             	CRCT2		DS	1
    62  0012 D             	COUNT		DS	1
    63  0013 D             	MAC_H		DS	1
    64  0014 D             	MAC_L		DS	1
    65  0015 D             	FRONT_DELAY	DS	1
    66  0016 D             	TIME_DELAY_GAP	DS	1
    67  0017 D             	STARTADDRH		DS	1
    68  0018 D             	STARTADDRL		DS	1
    69  0019 D             	INITIAL_TIMEH	DS	1
    70  001A D             	INITIAL_TIMEL	DS	1
    71  00001B             ;**************BIT_VARIABLES_DEFINNITIONS*******
    72  E 00000006         	READTM_FLAG	EQU	FLAG1.0
    73  E 00030006         	TIME_FLAG	EQU	FLAG1.3
    74  E 00010006         	RESET_FLAG	EQU	FLAG1.1
    75  E 00020006         	TM_EE_FLAG	EQU FLAG1.2
    76  E 00040006         	DEFAULT_GAP_FLAG	EQU	FLAG1.4
    77  E 00050006         	FILLOUT_FLAG	EQU	FLAG1.5
    78  E 00060006         	I2CERROR_FLAG	EQU	FLAG1.6
    79  E 00070006         	ASK_FLAG	EQU	FLAG1.7
    80  E 00010007         	READ_LED_FLAG	EQU	FLAG2.1
    81  E 00020007         	NOT_UPLOAD_FLAG	EQU	FLAG2.2
    82  E 00030007         	HAVE_UPLOAD_FLAG EQU FLAG2.3
    83  E 00040007         	NOT_QUICK_MODE_FLAG EQU FLAG2.4
    84  E 00050007         	TM_I2C_EEROR	EQU FLAG2.5
    85  E 00060007         	BLE_FLAG		EQU FLAG2.6
    86  E 000200D2         	CLED_IO			EQU	P2.2
    87  E 000100D2         	SDATA_IO		EQU	P2.1
    88  E 000000D2         	SCL_IO			EQU	P2.0
    89  E 000300D2         	S_TM_EE_IO		EQU	P2.3
    90  E 000400D2         	BLEF	EQU	P2.4
    91  E 000500D2         	SDA_IO			EQU	P2.5
    92  E 000400D5         	VTM_IO			EQU	P5.4
    93  E 000000D0         	VSR_IO			EQU	P0.0
    94  E 000200C2         	CLED_CONT		EQU	P2M.2
    95  E 000100C2         	SDATA_CONT		EQU	P2M.1
    96  E 000000C2         	SCL_CONT		EQU	P2M.0
    97  E 000300C2         	S_TM_EE_CONT	EQU	P2M.3
    98  E 000500C2         	SDA_CONT		EQU	P2M.5
    99  E 000400C5         	VTM_CONT		EQU	P5M.4
   100  E 000000B8         	VSR_CONT		EQU	P0M.0
   101  00001B             ;***************************************
   102  E 000100D1         	VDDF			EQU	P1.1
   103  E 000000D1         	S_VDD_VCC_IO		EQU	P1.0
   104  E 000000C1         	S_VDD_VCC_CONT		EQU	P1M.0
   105  00001B             ;*************CODE_SECTION**********************	
   106  000000             .CODE
   107  000000             
   108  000000             		ORG	0
   109  000000   8030(2)  	JMP		START
   110  000008             		ORG	8H
   111  000008   8009(2)  	JMP		INT_SERVICE
   112  000009             INT_SERVICE:
   113  000009             ;KEEP ACC AND PFLAG
   114  000009   0400(1)  	PUSH
   115  00000A             ;T0 INTERRUPT
   116  00000A             JUST_T0:
   117  00000A   74C9(1+S)  	B0BTS0	FT0IEN
   118  00000B   7CC8(1+S)  	B0BTS1	FT0IRQ
   119  00000C   8025(2)  	JMP		JUST_TC0
   120  00000D   64C8(1)  	B0BCLR	FT0IRQ
   121  00000E             ;T0 INTERRUPT SERVISE PROGRESS
   122  00000E   71D1(1+S)  	B0BTS0	VDDF
   123  00000F   4A07(1)  	BSET 	NOT_UPLOAD_FLAG
   124  000010   71D1(1+S)  	B0BTS0	VDDF
   125  000011   4307(1)  	BCLR    HAVE_UPLOAD_FLAG
   126  000012             ;///////////////////////////////
   127  000012   5B07(1+S)  	BTS1	HAVE_UPLOAD_FLAG
   128  000013   8016(2)  	JMP		$+3
   129  000014   79D1(1+S)  	B0BTS1	VDDF
   130  000015   4C07(1)  	BSET	NOT_QUICK_MODE_FLAG
   131  000016   79D1(1+S)  	B0BTS1	VDDF
   132  000017   4B07(1)  	BSET    HAVE_UPLOAD_FLAG
   133  000018             ;//////////////////////////////////
   134  000018   1608(1+S)  	INCMS	TIMEH ;TIMEH=TIMEH+1,
   135  000019   2D78(1)  	MOV		A,#TIME_GAP
   136  00001A   0708(1+S)  	CMPRS	A,TIMEH
   137  00001B   802E(2)  	JMP		EXIT_INT
   138  00001C   2B08(1)  	CLR		TIMEH
   139  00001D   4B06(1)  	BSET	TIME_FLAG
   140  00001E   1609(1+S)  	INCMS	TIMEG
   141  00001F   1E16(1)  	MOV		A,TIME_DELAY_GAP
   142  000020   0709(1+S)  	CMPRS	A,TIMEG
   143  000021   802E(2)  	JMP		EXIT_INT
   144  000022   2B09(1)  	CLR		TIMEG
   145  000023   4806(1)  	BSET	READTM_FLAG
   146  000024   802E(2)  	JMP		EXIT_INT
   147  000025             JUST_TC0:
   148  000025   75C9(1+S)  	B0BTS0	FTC0IEN
   149  000026   7DC8(1+S)  	B0BTS1	FTC0IRQ
   150  000027   802A(2)  	JMP		JUST_INT0
   151  000028   65C8(1)  	B0BCLR	FTC0IRQ
   152  000029             ;TC0 INTERRUPT SERVICE PROGRESS
   153  000029   802E(2)  	JMP		EXIT_INT
   154  00002A             JUST_INT0:
   155  00002A   70C9(1+S)  	B0BTS0	FP00IEN
   156  00002B   78C8(1+S)  	B0BTS1	FP00IRQ
   157  00002C   802E(2)  	JMP EXIT_INT
   158  00002D   60C8(1)  	B0BCLR	FP00IRQ
   159  00002E             ;INT0 INTERRUPT SERVISE PROGRESS
   160  00002E             EXIT_INT:
   161  00002E   0500(1)  	POP
   162  00002F   0F00(2)  	RETI
   163  000030             ;*********************************************************
   164  000030             ;***********************STARRT**********************
   165  000030             START:
   166  000030   2D7F(1)  	MOV		A,#07FH
   167  000031   2FDF(1)  	B0MOV		STKP,A		;DISABLE GLOBAL INTERRUPT
   168  000032   2B86(1)  	CLR		PFLAG
   169  000033   2D00(1)  	MOV		A,#00H
   170  000034   2FCA(1)  	B0MOV		OSCM,A
   171  000035   2D5A(1)  	MOV		A,#0X5A
   172  000036   2FCC(1)  	B0MOV		WDTR,A	
   173  000037   C184(2)  	CALL		CLRRAM
   174  000038             STATE_INITIAL:
   175  000038   C31F(2)  	CALL		SYS_INIT_FUN
   176  000039   67DF(1)  	B0BCLR		FGIE
   177  00003A             ;******************************************
   178  00003A   2D01(1)  	MOV		A,#DEFAULT_FRONT_TIME_DELAY
   179  00003B   1F15(1)  	MOV		FRONT_DELAY,A
   180  00003C   2D01(1)  	MOV		A,#DEFAULT_TIME_GAP
   181  00003D   1F16(1)  	MOV		TIME_DELAY_GAP,A
   182  00003E             ;////////////////////////////////
   183  00003E   5607(1+S)  	BTS0		BLE_FLAG
   184  00003F   805C(2)  	JMP			GET_INITIAL_DATA_FROM_EE
   185  000040             GET_TIME_INITIAL_TM:
   186  000040   6BD2(1)  	B0BSET	S_TM_EE_IO
   187  000041             ;Get initial time from tm
   188  000041   2D30(1)  	MOV		A,#TM_INITIAL_TIME_ADD_H
   189  000042   1F13(1)  	MOV		MAC_H,A
   190  000043   2D00(1)  	MOV		A,#TM_INITIAL_TIME_ADD_L
   191  000044   1F14(1)  	MOV		MAC_L,A
   192  000045   C1F1(2)  	CALL	GET_DATA_FROM_TM_FUN
   193  000046   1E0C(1)  	MOV		A,DATAH
   194  000047   0600(1+S)  	CMPRS	A,#0X00
   195  000048   1F19(1)  	MOV		INITIAL_TIMEH,A
   196  000049   1E0D(1)  	MOV		A,DATAL
   197  00004A   0600(1+S)  	CMPRS	A,#0X00
   198  00004B   1F1A(1)  	MOV		INITIAL_TIMEL,A
   199  00004C   C2FB(2)  	CALL	DELAY_SHORT
   200  00004D             ;GET TIME DELAY AND GAP FROM TM
   201  00004D   2D31(1)  	MOV		A,#TM_TIME_H
   202  00004E   1F13(1)  	MOV		MAC_H,A
   203  00004F   2D00(1)  	MOV		A,#TM_TIME_L
   204  000050   1F14(1)  	MOV		MAC_L,A
   205  000051   C1F1(2)  	CALL	GET_DATA_FROM_TM_FUN
   206  000052             ;the 2bit in front of DATAH is useness
   207  000052   2D3F(1)  	MOV		A,#0X3F
   208  000053   290C(1)  	AND		DATAH,A
   209  000054   1E0C(1)  	MOV			A,DATAH
   210  000055   0600(1+S)  	CMPRS		A,#0X00
   211  000056   1F15(1)  	MOV			FRONT_DELAY,A
   212  000057   1E0D(1)  	MOV			A,DATAL
   213  000058   0600(1+S)  	CMPRS		A,#0X00
   214  000059   1F16(1)  	MOV			TIME_DELAY_GAP,A		
   215  00005A   63D2(1)  	B0BCLR		S_TM_EE_IO
   216  00005B   C301(2)  	CALL		DELAY_LONG
   217  00005C             ;*******************************************
   218  00005C             GET_INITIAL_DATA_FROM_EE:
   219  00005C             ;*******************************************
   220  00005C   2D1F(1)  	MOV			A,#LAST_TIME_EE_ADD_H
   221  00005D   1F13(1)  	MOV			MAC_H,A
   222  00005E   2DFE(1)  	MOV			A,#LAST_TIME_EE_ADD_L
   223  00005F   1F14(1)  	MOV			MAC_L,A
   224  000060   5106(1+S)  	BTS0		RESET_FLAG
   225  000061   80C7(2)  	JMP			RESET_EEPROM
   226  000062   C242(2)  	CALL		GET_DATA_FROM_EE_FUN
   227  000063   1E0F(1)  	MOV			A,ADDRESSL
   228  000064   1F18(1)  	MOV			STARTADDRL,A
   229  000065   1E0E(1)  	MOV			A,ADDRESSH
   230  000066   1F17(1)  	MOV			STARTADDRH,A
   231  000067   1E0E(1)  	MOV			A,ADDRESSH
   232  000068   06FF(1+S)  	CMPRS		A,#0XFF
   233  000069   806C(2)  	JMP			$+3
   234  00006A   2B17(1)  	CLR			STARTADDRH
   235  00006B   2B18(1)  	CLR			STARTADDRL
   236  00006C   C301(2)  	CALL		DELAY_LONG
   237  00006D   2D1F(1)  	MOV			A,#LIVE_TIME_ADD_H
   238  00006E   1F13(1)  	MOV			MAC_H,A
   239  00006F   2DFC(1)  	MOV			A,#LIVE_TIME_ADD_L
   240  000070   1F14(1)  	MOV			MAC_L,A
   241  000071   C242(2)  	CALL		GET_DATA_FROM_EE_FUN
   242  000072             ;;;;;;;;;;;;;;LAST READ TM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   243  000072   6BD2(1)  	B0BSET		S_TM_EE_IO
   244  000073   60D0(1)  	B0BCLR		VSR_IO
   245  000074   2D34(1)  	MOV			A,#TM_DATA_H
   246  000075   1F13(1)  	MOV			MAC_H,A
   247  000076   2D00(1)  	MOV			A,#TM_DATA_L
   248  000077   1F14(1)  	MOV			MAC_L,A
   249  000078   C1F1(2)  	CALL		GET_DATA_FROM_TM_FUN
   250  000079   64D5(1)  	B0BCLR		VTM_IO
   251  00007A   C2FB(2)  	CALL		DELAY_SHORT
   252  00007B   63D2(1)  	B0BCLR		S_TM_EE_IO
   253  00007C   64C5(1)  	B0BCLR		VTM_CONT
   254  00007D             ;////////////////////READ BLE INITIAL TIME /////////////////
   255  00007D   5E07(1+S)  	BTS1		BLE_FLAG
   256  00007E   80AC(2)  	JMP			WRITE_INITIAL_DATA_TO_EE
   257  00007F             GET_INITIAL_TIME_FROM_EE:
   258  00007F   C2FB(2)  	CALL		DELAY_SHORT
   259  000080   2D1F(1)  	MOV		A,#EE_INITIAL_TIME_ADD_H
   260  000081   1F13(1)  	MOV		MAC_H,A
   261  000082   2DFA(1)  	MOV		A,#EE_INITIAL_TIME_ADD_L
   262  000083   1F14(1)  	MOV		MAC_L,A
   263  000084   C242(2)  	CALL		GET_DATA_FROM_EE_FUN
   264  000085   1E0E(1)  	MOV		A,ADDRESSH
   265  000086   1F19(1)  	MOV		INITIAL_TIMEH,A
   266  000087   1E0F(1)  	MOV		A,ADDRESSL
   267  000088   1F1A(1)  	MOV		INITIAL_TIMEL,A
   268  000089   C301(2)  	CALL	DELAY_LONG
   269  00008A   2D1F(1)  	MOV		A,#EE_DELAY_ADD_H
   270  00008B   1F13(1)  	MOV		MAC_H,A
   271  00008C   2DF8(1)  	MOV		A,#EE_GAP_ADD_L
   272  00008D   1F14(1)  	MOV		MAC_L,A
   273  00008E   C242(2)  	CALL		GET_DATA_FROM_EE_FUN
   274  00008F   1E0E(1)  	MOV		A,ADDRESSH
   275  000090   1F15(1)  	MOV		FRONT_DELAY,A
   276  000091   1E0F(1)  	MOV		A,ADDRESSL
   277  000092   1F16(1)  	MOV		TIME_DELAY_GAP,A
   278  000093   C301(2)  	CALL	DELAY_LONG
   279  000094             ;/////////////////WRITE TO TM//////////////////////////////
   280  000094             WRITE_INITIAL_DATA_TO_TM:
   281  000094   6BD2(1)  	B0BSET	S_TM_EE_IO
   282  000095             ;PUT initial time TO tm
   283  000095   2D30(1)  	MOV		A,#TM_INITIAL_TIME_ADD_H
   284  000096   1F13(1)  	MOV		MAC_H,A
   285  000097   2D00(1)  	MOV		A,#TM_INITIAL_TIME_ADD_L
   286  000098   1F14(1)  	MOV		MAC_L,A
   287  000099   1E19(1)  	MOV		A,INITIAL_TIMEH
   288  00009A   1F0C(1)  	MOV		DATAH,A
   289  00009B   1E1A(1)  	MOV		A,INITIAL_TIMEL
   290  00009C   1F0D(1)  	MOV		DATAL,A
   291  00009D   C1AF(2)  	CALL	PUT_DATA_INTO_TM_FUN
   292  00009E             ;PUT TIME DELAY AND GAP TO TM
   293  00009E   2D31(1)  	MOV		A,#TM_TIME_H
   294  00009F   1F13(1)  	MOV		MAC_H,A
   295  0000A0   2D00(1)  	MOV		A,#TM_TIME_L
   296  0000A1   1F14(1)  	MOV		MAC_L,A
   297  0000A2             ;the 2bit in front of DATAH is useness
   298  0000A2   2D3F(1)  	MOV		A,#0X3F
   299  0000A3   2815(1)  	AND		A,FRONT_DELAY
   300  0000A4   1F0C(1)  	MOV		DATAH,A
   301  0000A5   1E16(1)  	MOV		A,TIME_DELAY_GAP
   302  0000A6   1F0D(1)  	MOV		DATAL,A	
   303  0000A7   C1AF(2)  	CALL	PUT_DATA_INTO_TM_FUN
   304  0000A8             ;the 2bit in front of DATAH is useness
   305  0000A8   63D2(1)  	B0BCLR		S_TM_EE_IO
   306  0000A9   C301(2)  	CALL		DELAY_LONG
   307  0000AA             ;///////////////////////////////
   308  0000AA   5607(1+S)  	BTS0	BLE_FLAG
   309  0000AB   80C1(2)  	JMP		SET_WRITE_EE_START_ADD
   310  0000AC             ;/////////////////WRITE TO EE//////////////////////////////
   311  0000AC             WRITE_INITIAL_DATA_TO_EE:
   312  0000AC             ;///////////INITIAL TIME/////////////////////
   313  0000AC   C2FB(2)  	CALL		DELAY_SHORT
   314  0000AD   2D1F(1)  	MOV		A,#EE_INITIAL_TIME_ADD_H
   315  0000AE   1F13(1)  	MOV		MAC_H,A
   316  0000AF   2DFA(1)  	MOV		A,#EE_INITIAL_TIME_ADD_L
   317  0000B0   1F14(1)  	MOV		MAC_L,A
   318  0000B1   1E19(1)  	MOV		A,INITIAL_TIMEH
   319  0000B2   1F0C(1)  	MOV		DATAH,A
   320  0000B3   1E1A(1)  	MOV		A,INITIAL_TIMEL
   321  0000B4   1F0D(1)  	MOV		DATAL,A
   322  0000B5   C18C(2)  	CALL		DATA_TO_EEPROM_FUN
   323  0000B6   C301(2)  	CALL	DELAY_LONG
   324  0000B7   2D1F(1)  	MOV		A,#EE_DELAY_ADD_H
   325  0000B8   1F13(1)  	MOV		MAC_H,A
   326  0000B9   2DF8(1)  	MOV		A,#EE_GAP_ADD_L
   327  0000BA   1F14(1)  	MOV		MAC_L,A
   328  0000BB   1E15(1)  	MOV		A,FRONT_DELAY
   329  0000BC   1F0C(1)  	MOV		DATAH,A
   330  0000BD   1E16(1)  	MOV		A,TIME_DELAY_GAP
   331  0000BE   1F0D(1)  	MOV		DATAL,A
   332  0000BF   C18C(2)  	CALL		DATA_TO_EEPROM_FUN
   333  0000C0   C301(2)  	CALL	DELAY_LONG
   334  0000C1             
   335  0000C1             
   336  0000C1             SET_WRITE_EE_START_ADD:
   337  0000C1   1E17(1)  	MOV			A,STARTADDRH
   338  0000C2   1F0E(1)  	MOV			ADDRESSH,A
   339  0000C3   1E18(1)  	MOV			A,STARTADDRL
   340  0000C4   1F0F(1)  	MOV			ADDRESSL,A
   341  0000C5             	
   342  0000C5   5906(1+S)  	BTS1		RESET_FLAG
   343  0000C6   80E7(2)  	JMP			FRONT_DELAY_MODE
   344  0000C7             RESET_EEPROM:
   345  0000C7   2DFF(1)  	MOV		A,#0XFF
   346  0000C8   1F0C(1)  	MOV		DATAH,A
   347  0000C9   2DFF(1)  	MOV		A,#0XFF
   348  0000CA   1F0D(1)  	MOV		DATAL,A
   349  0000CB   2D00(1)  	MOV		A,#0X00
   350  0000CC   1F13(1)  	MOV		MAC_H,A
   351  0000CD             RESET_EE_LOOP_H:
   352  0000CD   2D00(1)  	MOV		A,#0X00
   353  0000CE   1F14(1)  	MOV		MAC_L,A
   354  0000CF             RESET_EE_LOOP_L:
   355  0000CF   C18C(2)  	CALL		DATA_TO_EEPROM_FUN
   356  0000D0   1614(1+S)  	INCMS	MAC_L
   357  0000D1   80CF(2)  	JMP		RESET_EE_LOOP_L
   358  0000D2   1613(1+S)  	INCMS	MAC_H
   359  0000D3   1E13(1)  	MOV		A,MAC_H
   360  0000D4   0620(1+S)  	CMPRS	A,#0X20
   361  0000D5   80CD(2)  	JMP		RESET_EE_LOOP_H
   362  0000D6   2B0F(1)  	CLR		ADDRESSL
   363  0000D7   2B0E(1)  	CLR		ADDRESSH
   364  0000D8   2D1F(1)  	MOV		A,#LAST_TIME_EE_ADD_H
   365  0000D9   1F13(1)  	MOV		MAC_H,A
   366  0000DA   2DFE(1)  	MOV		A,#LAST_TIME_EE_ADD_L
   367  0000DB   1F14(1)  	MOV		MAC_L,A
   368  0000DC   1E0E(1)  	MOV		A,ADDRESSH
   369  0000DD   1F0C(1)  	MOV		DATAH,A
   370  0000DE   1E0F(1)  	MOV		A,ADDRESSL
   371  0000DF   1F0D(1)  	MOV		DATAL,A
   372  0000E0   C18C(2)  	CALL		DATA_TO_EEPROM_FUN
   373  0000E1   2D1F(1)  	MOV			A,#LIVE_TIME_ADD_H
   374  0000E2   1F13(1)  	MOV			MAC_H,A
   375  0000E3   2DFC(1)  	MOV			A,#LIVE_TIME_ADD_L
   376  0000E4   1F14(1)  	MOV			MAC_L,A
   377  0000E5   C18C(2)  	CALL		DATA_TO_EEPROM_FUN
   378  0000E6   4106(1)  	BCLR		RESET_FLAG
   379  0000E7             ;******************************************
   380  0000E7             FRONT_DELAY_MODE:
   381  0000E7   6FDF(1)  	B0BSET		FGIE
   382  0000E8   C353(2)  	CALL		SET_LOW_POWER_FUN
   383  0000E9             ;DELAY WAIT_FOR_SEAVAL_MINITE_FUN
   384  0000E9             ;/////////////////////////////////////////	
   385  0000E9   1E15(1)  	MOV   	A,FRONT_DELAY
   386  0000EA   1F10(1)  	MOV		CRCT1,A
   387  0000EB             FRONT_DELAY_LOOP:
   388  0000EB             	GreenMode
   389  0000EB   6CCA(1)  		B0BSET	FCPUM1
   390  0000EC   0000(1)  		NOP
   391  0000ED   0000(1)  		NOP
   392  0000EE   5407(1+S)  	BTS0	NOT_QUICK_MODE_FLAG
   393  0000EF   C34A(2)  	CALL	SET_EE_TM_FUN
   394  0000F0   5207(1+S)  	BTS0	NOT_UPLOAD_FLAG
   395  0000F1   C353(2)  	CALL	SET_LOW_POWER_FUN
   396  0000F2   5B06(1+S)  	BTS1	TIME_FLAG
   397  0000F3   80EB(2)  	JMP		FRONT_DELAY_LOOP
   398  0000F4   4306(1)  	BCLR	TIME_FLAG
   399  0000F5   2610(1+S)  	DECMS	CRCT1
   400  0000F6   80EB(2)  	JMP		FRONT_DELAY_LOOP
   401  0000F7             	;///////////////////////////
   402  0000F7   4207(1)  	BCLR		NOT_UPLOAD_FLAG
   403  0000F8   4307(1)  	BCLR		HAVE_UPLOAD_FLAG
   404  0000F9   4607(1)  	BCLR		BLE_FLAG
   405  0000FA             ;//////////////////////////////////////
   406  0000FA             MAIN:
   407  0000FA             	;close tc0 interrupt until the recording finished 
   408  0000FA             	GreenMode
   409  0000FA   6CCA(1)  		B0BSET	FCPUM1
   410  0000FB   0000(1)  		NOP
   411  0000FC   0000(1)  		NOP
   412  0000FD             	
   413  0000FD             JUST_I2CSLAVE_MODE:
   414  0000FD   5806(1+S)  	BTS1	READTM_FLAG
   415  0000FE   8142(2)  	JMP		JUST_UPLOAD_MODE
   416  0000FF   5506(1+S)  	BTS0	FILLOUT_FLAG
   417  000100   8160(2)  	JMP		MEM_FILLOUT_MODE
   418  000101   7CC9(1+S)  	B0BTS1	FT0IEN
   419  000102   8142(2)  	JMP		JUST_UPLOAD_MODE
   420  000103             ;*****START TM I2C SLAVE MODE***********
   421  000103             I2CSLAVE_MODE:
   422  000103   4006(1)  	BCLR 	READTM_FLAG
   423  000104   59D1(1+S)  	BTS1	VDDF
   424  000105   8134(2)  	JMP		ADDRESS_CHANGE
   425  000106   5CD2(1+S)  	BTS1	BLEF
   426  000107   8134(2)  	JMP		ADDRESS_CHANGE
   427  000108   4607(1)  	BCLR	BLE_FLAG
   428  000109   67DF(1)  	B0BCLR 	FGIE
   429  00010A   6CC5(1)  	B0BSET	VTM_CONT
   430  00010B   6BD2(1)  	B0BSET	S_TM_EE_IO
   431  00010C   60D0(1)  	B0BCLR	VSR_IO
   432  00010D   2D34(1)  	MOV		A,#TM_DATA_H
   433  00010E   1F13(1)  	MOV		MAC_H,A
   434  00010F   2D00(1)  	MOV		A,#TM_DATA_L
   435  000110   1F14(1)  	MOV		MAC_L,A
   436  000111   C1F1(2)  	CALL	GET_DATA_FROM_TM_FUN
   437  000112   64D5(1)  	B0BCLR		VTM_IO
   438  000113   C2FB(2)  	CALL		DELAY_SHORT
   439  000114   63D2(1)  	B0BCLR		S_TM_EE_IO
   440  000115   64C5(1)  	B0BCLR		VTM_CONT
   441  000116   C2FB(2)  	CALL		DELAY_SHORT
   442  000117   1E0E(1)  	MOV		A,ADDRESSH
   443  000118   1F13(1)  	MOV		MAC_H,A
   444  000119   1E0F(1)  	MOV		A,ADDRESSL
   445  00011A   1F14(1)  	MOV		MAC_L,A
   446  00011B   C18C(2)  	CALL		DATA_TO_EEPROM_FUN
   447  00011C   2D1F(1)  	MOV		A,#LAST_TIME_EE_ADD_H
   448  00011D   1F13(1)  	MOV		MAC_H,A
   449  00011E   2DFE(1)  	MOV		A,#LAST_TIME_EE_ADD_L
   450  00011F   1F14(1)  	MOV		MAC_L,A
   451  000120   1E0E(1)  	MOV		A,ADDRESSH
   452  000121   1F0C(1)  	MOV		DATAH,A
   453  000122   1E0F(1)  	MOV		A,ADDRESSL
   454  000123   1F0D(1)  	MOV		DATAL,A
   455  000124   C18C(2)  	CALL		DATA_TO_EEPROM_FUN
   456  000125   74C8(1+S)  	B0BTS0		FT0IRQ
   457  000126   1608(1+S)  	INCMS		TIMEH
   458  000127   64C8(1)  	B0BCLR		FT0IRQ
   459  000128   6FDF(1)  	B0BSET		FGIE
   460  000129   2D78(1)  	MOV			A,#TIME_GAP
   461  00012A   0708(1+S)  	CMPRS		A,TIMEH
   462  00012B   8134(2)  	JMP			ADDRESS_CHANGE
   463  00012C   2B08(1)  	CLR			TIMEH
   464  00012D   4B06(1)  	BSET		TIME_FLAG
   465  00012E   1609(1+S)  	INCMS		TIMEG
   466  00012F   1E16(1)  	MOV			A,TIME_DELAY_GAP
   467  000130   0709(1+S)  	CMPRS		A,TIMEG
   468  000131   8134(2)  	JMP			ADDRESS_CHANGE
   469  000132   2B09(1)  	CLR			TIMEG
   470  000133   4806(1)  	BSET		READTM_FLAG
   471  000134             ADDRESS_CHANGE:
   472  000134   2D02(1)  	MOV			A,#0X02
   473  000135   130F(1)  	ADD			ADDRESSL,A
   474  000136   2D00(1)  	MOV			A,#0X00
   475  000137   110E(1)  	ADC			ADDRESSH,A
   476  000138   2D1F(1)  	MOV			A,#MAX_MEMH
   477  000139   070E(1+S)  	CMPRS		A,ADDRESSH
   478  00013A   80FD(2)  	JMP			JUST_I2CSLAVE_MODE
   479  00013B   2DDE(1)  	MOV			A,#MAX_MEML
   480  00013C   070F(1+S)  	CMPRS		A,ADDRESSL
   481  00013D   80FD(2)  	JMP			JUST_I2CSLAVE_MODE
   482  00013E   4D06(1)  	BSET		FILLOUT_FLAG
   483  00013F   67D8(1)  	B0BCLR		FT0ENB
   484  000140   64C9(1)  	B0BCLR		FT0IEN
   485  000141   8160(2)  	JMP			MEM_FILLOUT_MODE
   486  000142             ;*****************************************
   487  000142             JUST_UPLOAD_MODE:
   488  000142   62C2(1)  	B0BCLR		CLED_CONT
   489  000143   C2FB(2)  	CALL		DELAY_SHORT
   490  000144   C2FB(2)  	CALL		DELAY_SHORT
   491  000145   7AD2(1+S)  	B0BTS1		CLED_IO
   492  000146   8176(2)  	JMP			RESET_MODE
   493  000147             BLE_EE_UPLOAD_MODE:
   494  000147   5607(1+S)  	BTS0		BLE_FLAG
   495  000148   814E(2)  	JMP			END_BLE_EE_MODE
   496  000149   54D2(1+S)  	BTS0		BLEF
   497  00014A   8152(2)  	JMP			TM_EE_UPLOAD_MODE
   498  00014B   4E07(1)  	BSET		BLE_FLAG
   499  00014C   C353(2)  	CALL		SET_LOW_POWER_FUN
   500  00014D   8160(2)  	JMP			MEM_FILLOUT_MODE
   501  00014E             END_BLE_EE_MODE:
   502  00014E   5CD2(1+S)  	BTS1		BLEF
   503  00014F   8160(2)  	JMP			MEM_FILLOUT_MODE
   504  000150   C353(2)  	CALL		SET_LOW_POWER_FUN
   505  000151   4607(1)  	BCLR		BLE_FLAG
   506  000152             TM_EE_UPLOAD_MODE:
   507  000152   5206(1+S)  	BTS0		TM_EE_FLAG
   508  000153   815A(2)  	JMP			END_TM_EE_MODE
   509  000154   51D1(1+S)  	BTS0		VDDF
   510  000155   8160(2)  	JMP			MEM_FILLOUT_MODE
   511  000156             TM_EE_MODE:
   512  000156   4307(1)  	BCLR		HAVE_UPLOAD_FLAG
   513  000157   5206(1+S)  	BTS0		TM_EE_FLAG
   514  000158   815A(2)  	JMP			END_TM_EE_MODE
   515  000159   C34A(2)  	CALL		SET_EE_TM_FUN
   516  00015A             END_TM_EE_MODE:
   517  00015A             	;BTS0		FILLOUT_FLAG
   518  00015A             	;JMP			MEM_FILLOUT_MODE	
   519  00015A   59D1(1+S)  	BTS1		VDDF
   520  00015B   8160(2)  	JMP			MEM_FILLOUT_MODE
   521  00015C   C353(2)  	CALL		SET_LOW_POWER_FUN
   522  00015D   5506(1+S)  	BTS0		FILLOUT_FLAG
   523  00015E   8160(2)  	JMP			MEM_FILLOUT_MODE
   524  00015F             	;we should keep rtc function 
   525  00015F   816D(2)  	JMP		ON_LED_MODE
   526  000160             ;*************************************
   527  000160             MEM_FILLOUT_MODE:
   528  000160   5D06(1+S)  	BTS1	FILLOUT_FLAG
   529  000161   816D(2)  	JMP		ON_LED_MODE
   530  000162             ;***************************
   531  000162             	;B0BTS1	VDDF
   532  000162             	;JMP		$+4
   533  000162             	;BTS0	TM_EE_FLAG
   534  000162             	;CALL	SET_LOW_POWER_FUN
   535  000162             	;JMP		$+3
   536  000162             	;BTS1	TM_EE_FLAG
   537  000162             	;CALL	SET_EE_TM_FUN
   538  000162             ;********************************
   539  000162   7FD8(1+S)  	B0BTS1		FT0ENB
   540  000163   8167(2)  	JMP			$+4
   541  000164   2BD9(1)  	CLR			T0C
   542  000165   64C8(1)  	B0BCLR		FT0IRQ
   543  000166   64C9(1)  	B0BCLR		FT0IEN
   544  000167   67D8(1)  	B0BCLR		FT0ENB
   545  000168             	SleepMode
   546  000168   6BCA(1)  		B0BSET	FCPUM0
   547  000169             END_FILLOUT_MODE:
   548  000169   6AC2(1)  	B0BSET		CLED_CONT
   549  00016A   6AD2(1)  	B0BSET		CLED_IO
   550  00016B   C2F6(2)  	CALL		DELAY_MINI
   551  00016C   8142(2)  	JMP		JUST_UPLOAD_MODE
   552  00016D             ON_LED_MODE:
   553  00016D   6AC2(1)  	B0BSET	CLED_CONT
   554  00016E   6AD2(1)  	B0BSET	CLED_IO
   555  00016F   5107(1+S)  	BTS0	READ_LED_FLAG
   556  000170   C17B(2)  	CALL	READ_LED_FUN
   557  000171   4107(1)  	BCLR   	READ_LED_FLAG
   558  000172   6AD2(1)  	B0BSET	CLED_IO
   559  000173   5506(1+S)  	BTS0	FILLOUT_FLAG
   560  000174   8142(2)  	JMP		JUST_UPLOAD_MODE
   561  000175   80FA(2)  	JMP		MAIN
   562  000176             RESET_MODE:
   563  000176   4906(1)  	BSET	RESET_FLAG
   564  000177   4506(1)  	BCLR	FILLOUT_FLAG
   565  000178   2B08(1)  	CLR		TIMEH
   566  000179   2B09(1)  	CLR		TIMEG
   567  00017A   8038(2)  	JMP		STATE_INITIAL
   568  00017B             	
   569  00017B             ;******************************************************************************	
   570  00017B             READ_LED_FUN:
   571  00017B   2D01(1)     	MOV  	   	A,#1
   572  00017C   1F05(1)     	MOV  	   	TLC2,A
   573  00017D             LED_MODEL1:	
   574  00017D   6AD2(1)     	B0BSET   	CLED_IO
   575  00017E   C30B(2)     	CALL   	   	DELAY_LED
   576  00017F   62D2(1)     	B0BCLR   	CLED_IO
   577  000180   C30B(2)     	CALL   	   	DELAY_LED
   578  000181   2605(1+S)     	DECMS   	TLC2
   579  000182   817D(2)     	JMP   	   	LED_MODEL1
   580  000183   0E00(2)     	RET
   581  000184             ;*******************************************************
   582  000184             ;***************************************
   583  000184             	
   584  000184             	
   585  000184             	
   586  000184             	
   587  000184             	
   588  000184             	
   589  000184             	
   590  000184             	
   591  000184             	
   592  000184             	
   593  000184             	
   594  000184             	
   595  000184             	
   596  000184             	
   597  000184             	
   598  000184             	
   599  000184             CLRRAM:
   600  000184             	
   601  000184   2B84(1)  	CLR			Y
   602  000185   2D2F(1)  	MOV			A,#END_RAM_ADDR
   603  000186   2F83(1)  	B0MOV		Z,A
   604  000187             CLRRAM10:
   605  000187   2BE7(1)  	CLR			@YZ
   606  000188   2683(1+S)  	DECMS		Z
   607  000189   8187(2)  	JMP			CLRRAM10
   608  00018A   2BE7(1)  	CLR			@YZ
   609  00018B   0E00(2)  	RET
   610  00018C             ;***********************************
   611  00018C             ;***************************************
   612  00018C             ;*************WRITE TMEPERATURE INTO EEPROM*************
   613  00018C             ;*************RECORDING ADDRESS THE LAST TIME STORAGE THE TMPERATURE VALUE************
   614  00018C             ;**************************************
   615  00018C             DATA_TO_EEPROM_FUN:
   616  00018C   6DC2(1)  	B0BSET		SDA_CONT
   617  00018D   6DD2(1)  	B0BSET		SDA_IO
   618  00018E   68C2(1)  	B0BSET		SCL_CONT
   619  00018F   68D2(1)  	B0BSET		SCL_IO
   620  000190   1E14(1)  	MOV			A,MAC_L
   621  000191   1F11(1)  	MOV			CRCT2,A
   622  000192   1E0C(1)  	MOV			A,DATAH
   623  000193   1F10(1)  	MOV			CRCT1,A
   624  000194   2D02(1)  	MOV			A,#0X02
   625  000195   1F05(1)  	MOV			TLC2,A
   626  000196             MOVE_DATA_TO_EEPROM:
   627  000196   C26E(2)  	CALL		I2C_START_EE
   628  000197   2DA0(1)  	MOV			A,#EEW_ADD
   629  000198   1F0A(1)  	MOV			DATA_IN,A
   630  000199   C2BF(2)  	CALL		EEADDRESS_ASK
   631  00019A   1E13(1)  	MOV			A,MAC_H
   632  00019B   1F0A(1)  	MOV			DATA_IN,A
   633  00019C   C2BF(2)  	CALL		EEADDRESS_ASK
   634  00019D   1E11(1)  	MOV			A,CRCT2
   635  00019E   1F0A(1)  	MOV			DATA_IN,A
   636  00019F   C2BF(2)  	CALL		EEADDRESS_ASK
   637  0001A0   C2F6(2)  	CALL		DELAY_MINI
   638  0001A1   1E10(1)  	MOV			A,CRCT1
   639  0001A2   1F0A(1)  	MOV			DATA_IN,A
   640  0001A3   C2BF(2)  	CALL		EEADDRESS_ASK
   641  0001A4   C274(2)  	CALL		I2C_END_EE
   642  0001A5             	
   643  0001A5   C301(2)  	CALL		DELAY_LONG
   644  0001A6   2D01(1)  	MOV			A,#0X01
   645  0001A7   1311(1)  	ADD			CRCT2,A
   646  0001A8   1E0D(1)  	MOV			A,DATAL
   647  0001A9   1F10(1)  	MOV			CRCT1,A
   648  0001AA   2605(1+S)  	DECMS		TLC2
   649  0001AB   8196(2)  	JMP			MOVE_DATA_TO_EEPROM
   650  0001AC             ;*********************************************
   651  0001AC   60C2(1)  	B0BCLR		SCL_CONT
   652  0001AD   65C2(1)  	B0BCLR		SDA_CONT
   653  0001AE   0E00(2)  	RET
   654  0001AF             ;**************************************
   655  0001AF             PUT_DATA_INTO_TM_FUN:
   656  0001AF   68C2(1)  	B0BSET	SCL_CONT
   657  0001B0   69C2(1)  	B0BSET	SDATA_CONT
   658  0001B1   61D2(1)  	B0BCLR	SDATA_IO
   659  0001B2   60D2(1)  	B0BCLR	SCL_IO
   660  0001B3   C301(2)  	CALL 	DELAY_LONG
   661  0001B4   C301(2)  	CALL 	DELAY_LONG
   662  0001B5   6CD5(1)  	B0BSET 	VTM_IO
   663  0001B6   C301(2)  	CALL 	DELAY_LONG
   664  0001B7             	;CALL	DELAY_LONG
   665  0001B7             START_TMI2C_S:
   666  0001B7   2D04(1)  	MOV 	A,#0X04
   667  0001B8   1F03(1)  	MOV 	TLC0,A
   668  0001B9             LOOP_1_S:
   669  0001B9   68D2(1)  	B0BSET 	SCL_IO
   670  0001BA   C2F6(2)  	CALL	DELAY_MINI;13US
   671  0001BB   C2F5(2)  	CALL	CALL_DELAY
   672  0001BC   60D2(1)  	B0BCLR 	SCL_IO
   673  0001BD   C2F6(2)  	CALL 	DELAY_MINI
   674  0001BE   2603(1+S)  	DECMS  	TLC0
   675  0001BF   81B9(2)  	JMP 	LOOP_1_S
   676  0001C0   41D2(1)  	BCLR 	SDATA_IO
   677  0001C1   C301(2)  	CALL	DELAY_LONG
   678  0001C2   C301(2)  	CALL	DELAY_LONG
   679  0001C3   2D04(1)  	MOV 	A,#4
   680  0001C4   2F03(1)  	B0MOV 	TLC0,A
   681  0001C5             LOOP_2_S:
   682  0001C5   60D2(1)  	B0BCLR 	SCL_IO
   683  0001C6   C2F6(2)  	CALL	DELAY_MINI
   684  0001C7   C2F5(2)  	CALL	CALL_DELAY
   685  0001C8   68D2(1)  	B0BSET 	SCL_IO
   686  0001C9   C2F6(2)  	CALL	DELAY_MINI
   687  0001CA   2603(1+S)  	DECMS 	TLC0
   688  0001CB   81C5(2)  	JMP 	LOOP_2_S
   689  0001CC   C2FB(2)  	CALL	DELAY_SHORT
   690  0001CD   2D14(1)  	MOV 	A,#20
   691  0001CE   2F03(1)  	B0MOV 	TLC0,A
   692  0001CF   49D2(1)  	BSET 	SDATA_IO
   693  0001D0             WAIT_TM_INIT_S:
   694  0001D0   C301(2)  	CALL 		DELAY_LONG
   695  0001D1   2603(1+S)  	DECMS 		TLC0
   696  0001D2   81D0(2)  	JMP 		WAIT_TM_INIT_S
   697  0001D3             ;**************START*****************************
   698  0001D3   C27B(2)  	CALL		I2C_START_TM
   699  0001D4             ;***********************************************
   700  0001D4   2D3C(1)  	MOV 		A,#TMW_ADD
   701  0001D5   1F0A(1)  	MOV 		DATA_IN,A
   702  0001D6   C289(2)  	CALL 		TMADDRESS_ASK
   703  0001D7   5507(1+S)  	BTS0		TM_I2C_EEROR
   704  0001D8   81EB(2)  	JMP			END_TM_S
   705  0001D9   1E13(1)  	MOV 		A,MAC_H
   706  0001DA   1F0A(1)  	MOV 		DATA_IN,A
   707  0001DB   C289(2)  	CALL 		TMADDRESS_ASK
   708  0001DC   1E14(1)  	MOV 		A,MAC_L
   709  0001DD   1F0A(1)  	MOV 		DATA_IN,A
   710  0001DE   C289(2)  	CALL 		TMADDRESS_ASK
   711  0001DF   C301(2)  	CALL		DELAY_LONG
   712  0001E0   1E0C(1)  	MOV 		A,DATAH
   713  0001E1   1F0A(1)  	MOV 		DATA_IN,A
   714  0001E2   C289(2)  	CALL 		TMADDRESS_ASK
   715  0001E3   1E0D(1)  	MOV 		A,DATAL
   716  0001E4   1F0A(1)  	MOV 		DATA_IN,A
   717  0001E5   C289(2)  	CALL 		TMADDRESS_ASK
   718  0001E6   C2FB(2)  	CALL		DELAY_SHORT
   719  0001E7             ;**************END*******************************
   720  0001E7   C281(2)  	CALL		I2C_END_TM
   721  0001E8   C301(2)  	CALL		DELAY_LONG
   722  0001E9   C301(2)  	CALL		DELAY_LONG
   723  0001EA   61D2(1)  	B0BCLR		SDATA_IO
   724  0001EB             END_TM_S:
   725  0001EB   4507(1)  	BCLR		TM_I2C_EEROR
   726  0001EC   64D5(1)  	B0BCLR 		VTM_IO
   727  0001ED   61C2(1)  	B0BCLR		SDATA_CONT
   728  0001EE   60C2(1)  	B0BCLR		SCL_CONT
   729  0001EF   C2FB(2)  	CALL 		DELAY_SHORT
   730  0001F0   0E00(2)  	RET
   731  0001F1             ;*******************************************
   732  0001F1             ;*****************************************
   733  0001F1             GET_DATA_FROM_TM_FUN:
   734  0001F1   2D0F(1)  	MOV		A,#0X0F
   735  0001F2   1F12(1)  	MOV		COUNT,A
   736  0001F3             TM_I2C_WORK_LOOP:
   737  0001F3   68C2(1)  	B0BSET	SCL_CONT
   738  0001F4   69C2(1)  	B0BSET	SDATA_CONT
   739  0001F5   61D2(1)  	B0BCLR	SDATA_IO
   740  0001F6   60D2(1)  	B0BCLR	SCL_IO
   741  0001F7   C301(2)  	CALL 	DELAY_LONG
   742  0001F8   C301(2)  	CALL 	DELAY_LONG
   743  0001F9   6CD5(1)  	B0BSET 	VTM_IO
   744  0001FA   C301(2)  	CALL 	DELAY_LONG
   745  0001FB             	;CALL	DELAY_LONG
   746  0001FB             START_TMI2C:
   747  0001FB   2D04(1)  	MOV 	A,#0X04
   748  0001FC   1F03(1)  	MOV 	TLC0,A
   749  0001FD             LOOP_1:
   750  0001FD   68D2(1)  	B0BSET 	SCL_IO
   751  0001FE   C2F6(2)  	CALL	DELAY_MINI;13US
   752  0001FF   C2F5(2)  	CALL	CALL_DELAY
   753  000200   60D2(1)  	B0BCLR 	SCL_IO
   754  000201   C2F6(2)  	CALL 	DELAY_MINI
   755  000202   2603(1+S)  	DECMS  	TLC0
   756  000203   81FD(2)  	JMP 	LOOP_1
   757  000204   2D28(1)  	MOV 	A,#40
   758  000205   2F03(1)  	B0MOV 	TLC0,A
   759  000206   41D2(1)  	BCLR 	SDATA_IO
   760  000207   C301(2)  	CALL	DELAY_LONG
   761  000208             	;CALL	DELAY_SHORT
   762  000208   2D04(1)  	MOV 	A,#4
   763  000209   2F03(1)  	B0MOV 	TLC0,A
   764  00020A             LOOP_2:
   765  00020A   60D2(1)  	B0BCLR 	SCL_IO
   766  00020B   C2F6(2)  	CALL	DELAY_MINI
   767  00020C   C2F5(2)  	CALL	CALL_DELAY
   768  00020D   68D2(1)  	B0BSET 	SCL_IO
   769  00020E   C2F6(2)  	CALL	DELAY_MINI
   770  00020F   2603(1+S)  	DECMS 	TLC0
   771  000210   820A(2)  	JMP 	LOOP_2
   772  000211   C2FB(2)  	CALL	DELAY_SHORT
   773  000212   2D05(1)  	MOV 	A,#5
   774  000213   2F03(1)  	B0MOV 	TLC0,A
   775  000214   49D2(1)  	BSET 	SDATA_IO
   776  000215             WAIT_TM_INIT:
   777  000215   C301(2)  	CALL 		DELAY_LONG
   778  000216   2603(1+S)  	DECMS 		TLC0
   779  000217   8215(2)  	JMP 		WAIT_TM_INIT
   780  000218             ;**************START*****************************
   781  000218   C27B(2)  	CALL		I2C_START_TM
   782  000219             ;***********************************************
   783  000219   2D3D(1)  	MOV 		A,#TMR_ADD
   784  00021A   1F0A(1)  	MOV 		DATA_IN,A
   785  00021B   C289(2)  	CALL 		TMADDRESS_ASK
   786  00021C   5507(1+S)  	BTS0		TM_I2C_EEROR
   787  00021D   823C(2)  	JMP			END_TM
   788  00021E   1E13(1)  	MOV 		A,MAC_H
   789  00021F   1F0A(1)  	MOV 		DATA_IN,A
   790  000220   C289(2)  	CALL 		TMADDRESS_ASK
   791  000221   1E14(1)  	MOV 		A,MAC_L
   792  000222   1F0A(1)  	MOV 		DATA_IN,A
   793  000223   C289(2)  	CALL 		TMADDRESS_ASK
   794  000224   61C2(1)  	B0BCLR		SDATA_CONT
   795  000225   C301(2)  	CALL 		DELAY_LONG
   796  000226   4706(1)  	BCLR 		ASK_FLAG
   797  000227   C2A3(2)  	CALL 		TMDATA_ASK
   798  000228   1E0B(1)  	MOV 		A,DATA_OUT
   799  000229   1F0C(1)  	MOV 		DATAH,A
   800  00022A   4F06(1)  	BSET 		ASK_FLAG
   801  00022B   C2A3(2)  	CALL 		TMDATA_ASK
   802  00022C   1E0B(1)  	MOV 		A,DATA_OUT
   803  00022D   1F0D(1)  	MOV 		DATAL,A		
   804  00022E             ;**************END*******************************
   805  00022E   C281(2)  	CALL		I2C_END_TM
   806  00022F   C2FB(2)  	CALL		DELAY_SHORT
   807  000230   61D2(1)  	B0BCLR		SDATA_IO
   808  000231   2612(1+S)  	DECMS		COUNT
   809  000232   8234(2)  	JMP			$+2
   810  000233   823C(2)  	JMP			END_TM
   811  000234   64D5(1)  	B0BCLR 		VTM_IO
   812  000235   2D00(1)  	MOV			A,#0X00
   813  000236   070C(1+S)  	CMPRS		A,DATAH
   814  000237   823B(2)  	JMP			$+4
   815  000238   070D(1+S)  	CMPRS		A,DATAL
   816  000239   823B(2)  	JMP			$+2
   817  00023A   81F3(2)  	JMP			TM_I2C_WORK_LOOP
   818  00023B   4907(1)  	BSET		READ_LED_FLAG
   819  00023C             END_TM:
   820  00023C   4507(1)  	BCLR		TM_I2C_EEROR
   821  00023D   64D5(1)  	B0BCLR 		VTM_IO
   822  00023E   61C2(1)  	B0BCLR		SDATA_CONT
   823  00023F   60C2(1)  	B0BCLR		SCL_CONT
   824  000240   C2FB(2)  	CALL 		DELAY_SHORT
   825  000241   0E00(2)  	RET
   826  000242             ;*******************************************
   827  000242             ;***********************************************************
   828  000242             ;*********************************************************
   829  000242             GET_DATA_FROM_EE_FUN:
   830  000242   68C2(1)  	B0BSET		SCL_CONT
   831  000243   6DC2(1)  	B0BSET		SDA_CONT
   832  000244   6DD2(1)  	B0BSET		SDA_IO
   833  000245   68D2(1)  	B0BSET		SCL_IO
   834  000246   C2FB(2)  	CALL		DELAY_SHORT
   835  000247   C26E(2)  	CALL		I2C_START_EE
   836  000248   2DA0(1)  	MOV			A,#EEW_ADD
   837  000249   1F0A(1)  	MOV			DATA_IN,A
   838  00024A   C2BF(2)  	CALL		EEADDRESS_ASK
   839  00024B   1E13(1)  	MOV			A,MAC_H
   840  00024C   1F0A(1)  	MOV			DATA_IN,A
   841  00024D   C2BF(2)  	CALL		EEADDRESS_ASK
   842  00024E   1E14(1)  	MOV			A,MAC_L
   843  00024F   1F0A(1)  	MOV			DATA_IN,A
   844  000250   C2BF(2)  	CALL		EEADDRESS_ASK
   845  000251   6DD2(1)  	B0BSET		SDA_IO
   846  000252   C2FB(2)  	CALL		DELAY_SHORT
   847  000253   68D2(1)  	B0BSET		SCL_IO
   848  000254   C2FB(2)  	CALL		DELAY_SHORT
   849  000255   C26E(2)  	CALL		I2C_START_EE
   850  000256   C2FB(2)  	CALL		DELAY_SHORT
   851  000257   2DA1(1)  	MOV			A,#EER_ADD
   852  000258   1F0A(1)  	MOV			DATA_IN,A
   853  000259   C2BF(2)  	CALL		EEADDRESS_ASK
   854  00025A   65C2(1)  	B0BCLR		SDA_CONT
   855  00025B   4706(1)  	BCLR		ASK_FLAG
   856  00025C   C2D9(2)  	CALL		EEDATA_ASK
   857  00025D   1E0B(1)  	MOV			A,DATA_OUT
   858  00025E   1F0E(1)  	MOV			ADDRESSH,A
   859  00025F   65C2(1)  	B0BCLR		SDA_CONT
   860  000260   C2F6(2)  	CALL		DELAY_MINI
   861  000261   4F06(1)  	BSET		ASK_FLAG
   862  000262   C2D9(2)  	CALL		EEDATA_ASK
   863  000263   1E0B(1)  	MOV			A,DATA_OUT
   864  000264   1F0F(1)  	MOV			ADDRESSL,A
   865  000265   C274(2)  	CALL		I2C_END_EE
   866  000266             ;*************************************
   867  000266   C2FB(2)  	CALL		DELAY_SHORT
   868  000267   60C2(1)  	B0BCLR		SCL_CONT
   869  000268   65C2(1)  	B0BCLR		SDA_CONT
   870  000269   0E00(2)  	RET
   871  00026A             ;************************************************
   872  00026A             I2C_EEROR:
   873  00026A             	;open interrupt
   874  00026A             	;SleepMode
   875  00026A   4606(1)  	BCLR	I2CERROR_FLAG
   876  00026B   54D5(1+S)  	BTS0	VTM_IO
   877  00026C   4D07(1)  	BSET	TM_I2C_EEROR
   878  00026D   0E00(2)  	RET
   879  00026E             I2C_START_EE:
   880  00026E   C2F6(2)  	CALL		DELAY_MINI
   881  00026F   65D2(1)  	B0BCLR 		SDA_IO
   882  000270   C2F6(2)  	CALL 		DELAY_MINI
   883  000271   60D2(1)  	B0BCLR 		SCL_IO
   884  000272   C2F6(2)  	CALL 		DELAY_MINI
   885  000273   0E00(2)  	RET
   886  000274             I2C_END_EE:
   887  000274   65D2(1)  	B0BCLR 		SDA_IO
   888  000275   C2F6(2)  	CALL 		DELAY_MINI
   889  000276   68D2(1)  	B0BSET 		SCL_IO
   890  000277   C2F6(2)  	CALL 		DELAY_MINI
   891  000278   6DD2(1)  	B0BSET 		SDA_IO
   892  000279   C2F6(2)  	CALL		DELAY_MINI
   893  00027A   0E00(2)  	RET
   894  00027B             I2C_START_TM:
   895  00027B   C2F6(2)  	CALL		DELAY_MINI
   896  00027C   61D2(1)  	B0BCLR 		SDATA_IO
   897  00027D   C2F6(2)  	CALL 		DELAY_MINI
   898  00027E   60D2(1)  	B0BCLR 		SCL_IO
   899  00027F   C2F6(2)  	CALL 		DELAY_MINI
   900  000280   0E00(2)  	RET
   901  000281             I2C_END_TM:
   902  000281   61D2(1)  	B0BCLR 		SDATA_IO
   903  000282   C2F6(2)  	CALL 		DELAY_MINI
   904  000283   60D2(1)  	B0BCLR		SCL_IO
   905  000284   C2F6(2)  	CALL		DELAY_MINI
   906  000285   69D2(1)  	B0BSET 		SDATA_IO
   907  000286   C2F6(2)  	CALL		DELAY_MINI
   908  000287   68D2(1)  	B0BSET 		SCL_IO
   909  000288   0E00(2)  	RET
   910  000289             TMADDRESS_ASK:
   911  000289   2D08(1)  	MOV 		A,#8
   912  00028A   1F02(1)  	MOV 		TIMEOUT,A
   913  00028B             TMADDRESS_LOOP:
   914  00028B   570A(1+S)  	BTS0		DATA_IN.7
   915  00028C   8290(2)  	JMP 		MD_1
   916  00028D   71D2(1+S)  	B0BTS0 		SDATA_IO
   917  00028E   61D2(1)  	B0BCLR		SDATA_IO
   918  00028F   8292(2)  	JMP 		NEXT_1
   919  000290             MD_1:
   920  000290   79D2(1+S)  	B0BTS1 		SDATA_IO
   921  000291   69D2(1)  	B0BSET		SDATA_IO
   922  000292             NEXT_1:
   923  000292   C2F6(2)  	CALL		DELAY_MINI
   924  000293   68D2(1)  	B0BSET 		SCL_IO
   925  000294   C2F6(2)  	CALL		DELAY_MINI
   926  000295   0B0A(1)  	RLCM 		DATA_IN
   927  000296   60D2(1)  	B0BCLR 		SCL_IO
   928  000297   2602(1+S)  	DECMS 		TIMEOUT
   929  000298   828B(2)  	JMP 		TMADDRESS_LOOP
   930  000299             	
   931  000299   61C2(1)  	B0BCLR 		SDATA_CONT
   932  00029A   C2F6(2)  	CALL		DELAY_MINI
   933  00029B   68D2(1)  	B0BSET 		SCL_IO
   934  00029C   C2F5(2)  	CALL 		CALL_DELAY
   935  00029D   71D2(1+S)  	B0BTS0 		SDATA_IO
   936  00029E   C26A(2)  	CALL		I2C_EEROR
   937  00029F   C2F6(2)  	CALL		DELAY_MINI
   938  0002A0   40D2(1)  	BCLR 		SCL_IO
   939  0002A1   49C2(1)  	BSET 		SDATA_CONT
   940  0002A2   0E00(2)  	RET
   941  0002A3             ;**********************TM_READING_DATA********************************
   942  0002A3             TMDATA_ASK:
   943  0002A3   61C2(1)  	B0BCLR 		SDATA_CONT
   944  0002A4   2D08(1)  	MOV 		A,#8
   945  0002A5   1F02(1)  	MOV 		TIMEOUT,A
   946  0002A6             TMDATA_LOOP:
   947  0002A6   2D09(1)  	MOV 		A,#9
   948  0002A7   1F03(1)  	MOV 		TLC0,A
   949  0002A8   C2F6(2)  	CALL		DELAY_MINI
   950  0002A9   48D2(1)  	BSET 		SCL_IO
   951  0002AA   C2F5(2)  	CALL 		CALL_DELAY
   952  0002AB   71D2(1+S)  	B0BTS0 		SDATA_IO
   953  0002AC   480B(1)  	BSET 		DATA_OUT.0
   954  0002AD   79D2(1+S)  	B0BTS1 		SDATA_IO
   955  0002AE   400B(1)  	BCLR 		DATA_OUT.0
   956  0002AF   0B0B(1)  	RLCM 		DATA_OUT
   957  0002B0   C2F6(2)  	CALL		DELAY_MINI
   958  0002B1   60D2(1)  	B0BCLR 		SCL_IO
   959  0002B2   2602(1+S)  	DECMS 		TIMEOUT
   960  0002B3   82A6(2)  	JMP 		TMDATA_LOOP
   961  0002B4   69C2(1)  	B0BSET 		SDATA_CONT
   962  0002B5   5706(1+S)  	BTS0 		ASK_FLAG
   963  0002B6   69D2(1)  	B0BSET 		SDATA_IO
   964  0002B7   5F06(1+S)  	BTS1 		ASK_FLAG
   965  0002B8   61D2(1)  	B0BCLR 		SDATA_IO
   966  0002B9   090B(1)  	RRCM 		DATA_OUT
   967  0002BA   C2F6(2)  	CALL		DELAY_MINI
   968  0002BB   48D2(1)  	BSET 		SCL_IO
   969  0002BC   C2F6(2)  	CALL		DELAY_MINI
   970  0002BD   40D2(1)  	BCLR		SCL_IO	
   971  0002BE   0E00(2)  	RET
   972  0002BF             ;******************************************************
   973  0002BF             EEADDRESS_ASK:
   974  0002BF   2D08(1)  	MOV 		A,#8
   975  0002C0   1F02(1)  	MOV 		TIMEOUT,A
   976  0002C1             EEADDRESS_LOOP:
   977  0002C1   570A(1+S)  	BTS0		DATA_IN.7
   978  0002C2   82C6(2)  	JMP 		EEMD_1
   979  0002C3   75D2(1+S)  	B0BTS0 		SDA_IO
   980  0002C4   65D2(1)  	B0BCLR		SDA_IO
   981  0002C5   82C8(2)  	JMP 		EENEXT_1
   982  0002C6             EEMD_1:
   983  0002C6   7DD2(1+S)  	B0BTS1 		SDA_IO
   984  0002C7   6DD2(1)  	B0BSET		SDA_IO
   985  0002C8             EENEXT_1:
   986  0002C8   C2F6(2)  	CALL		DELAY_MINI
   987  0002C9   68D2(1)  	B0BSET 		SCL_IO
   988  0002CA   C2F6(2)  	CALL		DELAY_MINI
   989  0002CB   0B0A(1)  	RLCM 		DATA_IN
   990  0002CC   60D2(1)  	B0BCLR 		SCL_IO
   991  0002CD   2602(1+S)  	DECMS 		TIMEOUT
   992  0002CE   82C1(2)  	JMP 		EEADDRESS_LOOP
   993  0002CF             	
   994  0002CF   65C2(1)  	B0BCLR 		SDA_CONT
   995  0002D0   C2F6(2)  	CALL		DELAY_MINI
   996  0002D1   68D2(1)  	B0BSET 		SCL_IO
   997  0002D2   C2F5(2)  	CALL 		CALL_DELAY
   998  0002D3   75D2(1+S)  	B0BTS0 		SDA_IO
   999  0002D4   C26A(2)  	CALL		I2C_EEROR
  1000  0002D5   C2F6(2)  	CALL		DELAY_MINI
  1001  0002D6   40D2(1)  	BCLR 		SCL_IO
  1002  0002D7   4DC2(1)  	BSET 		SDA_CONT
  1003  0002D8   0E00(2)  	RET
  1004  0002D9             ;****************************************
  1005  0002D9             EEDATA_ASK:
  1006  0002D9   65C2(1)  	B0BCLR 		SDA_CONT
  1007  0002DA   2D08(1)  	MOV 		A,#8
  1008  0002DB   1F02(1)  	MOV 		TIMEOUT,A
  1009  0002DC             EEDATA_LOOP:
  1010  0002DC   2D09(1)  	MOV 		A,#9
  1011  0002DD   1F03(1)  	MOV 		TLC0,A
  1012  0002DE   C2F6(2)  	CALL		DELAY_MINI
  1013  0002DF   48D2(1)  	BSET 		SCL_IO
  1014  0002E0   C2F5(2)  	CALL 		CALL_DELAY
  1015  0002E1   75D2(1+S)  	B0BTS0 		SDA_IO
  1016  0002E2   480B(1)  	BSET 		DATA_OUT.0
  1017  0002E3   7DD2(1+S)  	B0BTS1 		SDA_IO
  1018  0002E4   400B(1)  	BCLR 		DATA_OUT.0
  1019  0002E5   0B0B(1)  	RLCM 		DATA_OUT
  1020  0002E6   C2F6(2)  	CALL		DELAY_MINI
  1021  0002E7   60D2(1)  	B0BCLR 		SCL_IO
  1022  0002E8   2602(1+S)  	DECMS 		TIMEOUT
  1023  0002E9   82DC(2)  	JMP 		EEDATA_LOOP
  1024  0002EA             	
  1025  0002EA   6DC2(1)  	B0BSET 		SDA_CONT
  1026  0002EB   5706(1+S)  	BTS0 		ASK_FLAG
  1027  0002EC   6DD2(1)  	B0BSET 		SDA_IO
  1028  0002ED   5F06(1+S)  	BTS1 		ASK_FLAG
  1029  0002EE   65D2(1)  	B0BCLR 		SDA_IO
  1030  0002EF   090B(1)  	RRCM 		DATA_OUT
  1031  0002F0   C2F6(2)  	CALL		DELAY_MINI
  1032  0002F1   48D2(1)  	BSET 		SCL_IO
  1033  0002F2   C2F6(2)  	CALL		DELAY_MINI
  1034  0002F3   40D2(1)  	BCLR		SCL_IO	
  1035  0002F4   0E00(2)  	RET
  1036  0002F5             ;*********************delay*****************
  1037  0002F5             CALL_DELAY:
  1038  0002F5   0E00(2)  	RET
  1039  0002F6             DELAY_MINI:;13US
  1040  0002F6   2D05(1)  	MOV		A,#0X05
  1041  0002F7   1F00(1)  	MOV		DELAYTIME1,A
  1042  0002F8             DELAY0:
  1043  0002F8   2600(1+S)  	DECMS	DELAYTIME1
  1044  0002F9   82F8(2)  	JMP		DELAY0
  1045  0002FA   0E00(2)  	RET
  1046  0002FB             	
  1047  0002FB             DELAY_SHORT:		;50US FOR 0.5US/INSTRUCTION
  1048  0002FB   2D63(1)  	MOV		A,#0X63
  1049  0002FC   1F00(1)  	MOV		DELAYTIME1,A
  1050  0002FD             DELAY1:
  1051  0002FD   0000(1)  	NOP
  1052  0002FE   2600(1+S)  	DECMS	DELAYTIME1
  1053  0002FF   82FD(2)  	JMP		DELAY1
  1054  000300   0E00(2)  	RET
  1055  000301             DELAY_LONG:	;>=5MS
  1056  000301             ;WAIT_FOR_A_LONG_WHILE
  1057  000301   2D0A(1)  	MOV		A,#0X0A
  1058  000302   2F00(1)  	B0MOV	DELAYTIME1,A
  1059  000303             DELAY2_1:
  1060  000303   2DC7(1)  	MOV		A,#0XC7
  1061  000304   1F01(1)  	MOV		DELAYTIME2,A
  1062  000305             DELAY2_2:
  1063  000305   0000(1)  	NOP
  1064  000306   2601(1+S)  	DECMS	DELAYTIME2
  1065  000307   8305(2)  	JMP		DELAY2_2	
  1066  000308   2600(1+S)  	DECMS	DELAYTIME1
  1067  000309   8303(2)  	JMP		DELAY2_1
  1068  00030A   0E00(2)  	RET		
  1069  00030B             DELAY_LED:		;0.2S
  1070  00030B             ;WAIT_FOR_DEEP_DARK_FANTASY
  1071  00030B   2DFF(1)  	MOV		A,#0XFF
  1072  00030C   1F01(1)  	MOV		DELAYTIME2,A
  1073  00030D             DELAY3_1:
  1074  00030D   2DFF(1)  	MOV		A,#0XFF
  1075  00030E   1F00(1)  	MOV		DELAYTIME1,A
  1076  00030F             DELAY3_2:
  1077  00030F   0000(1)  	NOP
  1078  000310   0000(1)  	NOP
  1079  000311   2600(1+S)  	DECMS		DELAYTIME1
  1080  000312   830F(2)  	JMP			DELAY3_2
  1081  000313   2601(1+S)  	DECMS		DELAYTIME2
  1082  000314   830D(2)  	JMP			DELAY3_1
  1083  000315   0E00(2)  	RET
  1084  000316             OPEN_TC0_INT_FUN:
  1085  000316   6BDA(1)  	B0BSET	FTC0CKS	;	OUTSIDE INPUT ACCIDENT
  1086  000317   6ADA(1)  	B0BSET	FALOAD0 ;
  1087  000318   2DFD(1)  	MOV		A,#0XFD
  1088  000319   2FCD(1)  	B0MOV	TC0R,A
  1089  00031A   2FDB(1)  	B0MOV	TC0C,A
  1090  00031B   65C8(1)  	B0BCLR	FTC0IRQ
  1091  00031C   6DC9(1)  	B0BSET	FTC0IEN
  1092  00031D   6FDA(1)  	B0BSET	FTC0ENB
  1093  00031E   0E00(2)  	RET
  1094  00031F             SYS_INIT_FUN:
  1095  00031F   2D2D(1)  	MOV			A,#0X2D
  1096  000320   2FC2(1)  	B0MOV		P2M,A
  1097  000321   2D35(1)  	MOV			A,#0X35
  1098  000322   2FD2(1)  	B0MOV		P2,A
  1099  000323             	;up resistor for p2.1
  1100  000323             	;MOV			A,#0X02
  1101  000323             	;B0MOV		P2UR,A
  1102  000323   2D01(1)  	MOV			A,#0X01
  1103  000324   2FC1(1)  	B0MOV		P1M,A
  1104  000325   2BD1(1)  	CLR			P1
  1105  000326   68B8(1)  	B0BSET		VSR_CONT
  1106  000327   60D0(1)  	B0BCLR		VSR_IO
  1107  000328   68C1(1)  	B0BSET		S_VDD_VCC_CONT
  1108  000329   60D1(1)  	B0BCLR		S_VDD_VCC_IO
  1109  00032A   6CC5(1)  	B0BSET		VTM_CONT
  1110  00032B   64D5(1)  	B0BCLR		VTM_IO
  1111  00032C   2D03(1)  	MOV			A,#0X03
  1112  00032D   1F10(1)  	MOV			CRCT1,A
  1113  00032E   C2FB(2)  	CALL		DELAY_SHORT
  1114  00032F   54D2(1+S)  	BTS0		BLEF
  1115  000330   8334(2)  	JMP			SYS_INIT_LED
  1116  000331   4E07(1)  	BSET		BLE_FLAG
  1117  000332   2D02(1)  	MOV			A,#0X02
  1118  000333   1F10(1)  	MOV			CRCT1,A
  1119  000334             SYS_INIT_LED:
  1120  000334   62D2(1)  	B0BCLR		CLED_IO
  1121  000335   C30B(2)  	CALL		DELAY_LED	
  1122  000336   6AD2(1)  	B0BSET		CLED_IO
  1123  000337   C30B(2)  	CALL		DELAY_LED
  1124  000338   2610(1+S)  	DECMS		CRCT1
  1125  000339   8334(2)  	JMP			SYS_INIT_LED
  1126  00033A             ;************T0_INIT_START************************************
  1127  00033A   2D00(1)  	MOV			A,#0X00
  1128  00033B   2FD8(1)  	B0MOV		T0M,A	
  1129  00033C   68D8(1)  	B0BSET		FT0TB	; T0 = Fcpu/256,PERIOD TIME IS 2S
  1130  00033D   2BD9(1)  	CLR			T0C
  1131  00033E   64C8(1)  	B0BCLR		FT0IRQ
  1132  00033F   6CC9(1)  	B0BSET		FT0IEN
  1133  000340   6FD8(1)  	B0BSET		FT0ENB
  1134  000341             ;*****************TC0_INIT_START*****************
  1135  000341   2BDA(1)  	CLR			TC0M
  1136  000342   2BDB(1)  	CLR			TC0C
  1137  000343   65C8(1)  	B0BCLR		FTC0IRQ
  1138  000344   65C9(1)  	B0BCLR		FTC0IEN
  1139  000345   67DA(1)  	B0BCLR		FTC0ENB
  1140  000346             ;************************OPEN P1.1WEEK UP FUNCTION*********************
  1141  000346   2D02(1)  	MOV			A,#0X02
  1142  000347   2FC0(1)  	B0MOV		P1W,A
  1143  000348   C2F6(2)  	CALL		DELAY_MINI
  1144  000349   0E00(2)  	RET
  1145  00034A             ;//////////////////////////////////////////////////
  1146  00034A             SET_EE_TM_FUN:
  1147  00034A   65C2(1)  	B0BCLR		SDA_CONT
  1148  00034B   64C5(1)  	B0BCLR		VTM_CONT
  1149  00034C   60C2(1)  	B0BCLR		SCL_CONT
  1150  00034D   61C2(1)  	B0BCLR		SDATA_CONT
  1151  00034E   68D0(1)  	B0BSET		VSR_IO
  1152  00034F   6BD2(1)  	B0BSET		S_TM_EE_IO
  1153  000350   4A06(1)  	BSET		TM_EE_FLAG
  1154  000351   4407(1)  	BCLR	NOT_QUICK_MODE_FLAG
  1155  000352   0E00(2)  	RET
  1156  000353             ;////////////////////////////////////////
  1157  000353             ;////////////SET LOW POWER
  1158  000353             SET_LOW_POWER_FUN:
  1159  000353             ;****************************************
  1160  000353   64C5(1)  	B0BCLR		VTM_CONT
  1161  000354   63D2(1)  	B0BCLR		S_TM_EE_IO
  1162  000355   60D0(1)  	B0BCLR		VSR_IO
  1163  000356   4206(1)  	BCLR		TM_EE_FLAG
  1164  000357   0E00(2)  	RET
  1165  000358             ;/////////////////////////////////////////	
  1166  000358             ;*******************************************
  1167  000358             	ENDP
  1168  000358             
