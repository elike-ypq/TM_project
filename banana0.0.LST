     1  000000             CHIP		SN8P2501D
     2  000000             //{{SONIX_CODE_OPTION
     3  000000             	.Code_Option	Noise_Filter	Enable
     4  000000             	.Code_Option	Reset_Pin	P11
     5  000000             	.Code_Option	Watch_Dog	Disable
     6  000000             	.Code_Option	High_Clk	IHRC_RTC	;
     7  000000             	.Code_Option	Fcpu		#3     ; Fcpu = Fosc/8
     8  000000             	.Code_Option	Security	Enable
     9  000000             	.Code_Option	LVD		LVD_L		;
    10  000000             //}}SONIX_CODE_OPTION
    11  000000             
    12  E 0000002F         	END_RAM_ADDR	EQU	0X2F
    13  E 000000A1         	EER_ADD			EQU	0XA1	;10100001B
    14  E 000000A0         	EEW_ADD			EQU	0XA0	;10100000B
    15  E 00000030         	RAM_COUNT		EQU	48
    16  E 00000034         	TM_DATA_H		EQU	0X34	;ADDR OF THE TEMPEATURE	OF TM
    17  E 00000000         	TM_DATA_L		EQU	0X00
    18  E 00000078         	TIME_GAP		EQU	0X78	;0X78
    19  E 00000001         	T0_TDR			EQU	0X01
    20  E 0000003D         	TMR_ADD 		EQU	0X3D
    21  E 0000003C         	TMW_ADD			EQU	0X3C
    22  E 0000001F         	MAX_MEMH		EQU	0X1F
    23  E 000000DE         	MAX_MEML		EQU	0XDE
    24  E 0000001F         	LAST_TIME_EE_ADD_H EQU 0X1F
    25  E 000000FE         	LAST_TIME_EE_ADD_L EQU 0XFE
    26  E 0000001F         	LIVE_TIME_ADD_H		EQU	0X1F
    27  E 000000FC         	LIVE_TIME_ADD_L		EQU	0XFC
    28  E 00000001         	DEFAULT_FRONT_TIME_DELAY	EQU	0X01
    29  E 00000001         	DEFAULT_TIME_GAP	EQU	0X01
    30  E 00000030         	TM_INITIAL_TIME_ADD_H	EQU 0X30
    31  E 00000000         	TM_INITIAL_TIME_ADD_L	EQU 0X00
    32  E 00000031         	TM_TIME_H		EQU	0X31
    33  E 00000000         	TM_TIME_L		EQU	0X00
    34  E 0000001F         	EE_DELAY_ADD_H	EQU	0X1F
    35  E 000000F8         	EE_GAP_ADD_L	EQU	0XF8
    36  E 0000001F         	EE_INITIAL_TIME_ADD_H	EQU	0X1F
    37  E 000000FA         	EE_INITIAL_TIME_ADD_L	EQU	0XFA
    38  E 00000001         	WRITE_FLAG_H	EQU 0X01
    39  E 00000000         	WRITE_FLAG_L	EQU	0X00
    40  E 00000002         	DEFAULT_GAP_TIME_FLAGH EQU 0X02
    41  E 00000000         	DEFAULT_GAP_TIME_FLAGL EQU	0X00
    42  E 00000020         	HIGT_TMP_LEVEL1	EQU	0X20
    43  E 00000005         	LOW_TMP_LEVEL1 EQU	0X05
    44  000000             .DATA
    45  000000             			ORG	0H
    46  0000 D             	DELAYTIME1	DS	1
    47  0001 D             	DELAYTIME2	DS	1
    48  0002 D             	TIMEOUT		DS	1
    49  0003 D             	TLC0		DS	1
    50  0004 D             	TLC2		DS	1
    51  0005 D             	FLAG1		DS	1
    52  0006 D             	FLAG2		DS	1
    53  0007 D             	TIMEH		DS	1
    54  0008 D             	TIMEG		DS	1
    55  0009 D             	DATA_IN		DS	1
    56  000A D             	DATA_OUT	DS	1
    57  000B D             	DATAH		DS	1
    58  000C D             	DATAL		DS	1
    59  000D D             	ADDRESSH	DS	1
    60  000E D             	ADDRESSL	DS	1
    61  000F D             	CRCT1		DS	1
    62  0010 D             	CRCT2		DS	1
    63  0011 D             	COUNT		DS	1
    64  0012 D             	MAC_H		DS	1
    65  0013 D             	MAC_L		DS	1
    66  0014 D             	FRONT_DELAY	DS	1
    67  0015 D             	TIME_DELAY_GAP	DS	1
    68  0016 D             	STARTADDRH		DS	1
    69  0017 D             	STARTADDRL		DS	1
    70  0018 D             	INITIAL_TIMEH	DS	1
    71  0019 D             	INITIAL_TIMEL	DS	1
    72  001A D             	TEMPERATURE_H	DS	1
    73  00001B             ;**************BIT_VARIABLES_DEFINNITIONS*******
    74  E 00000005         	READTM_FLAG	EQU	FLAG1.0
    75  E 00030005         	TIME_FLAG	EQU	FLAG1.3
    76  E 00010005         	RESET_FLAG	EQU	FLAG1.1
    77  E 00020005         	TM_EE_FLAG	EQU FLAG1.2
    78  E 00040005         	DEFAULT_GAP_FLAG	EQU	FLAG1.4
    79  E 00050005         	FILLOUT_FLAG	EQU	FLAG1.5
    80  E 00060005         	I2CERROR_FLAG	EQU	FLAG1.6
    81  E 00070005         	ASK_FLAG	EQU	FLAG1.7
    82  E 00010006         	READ_LED_FLAG	EQU	FLAG2.1
    83  E 00020006         	NOT_UPLOAD_FLAG	EQU	FLAG2.2
    84  E 00030006         	HAVE_UPLOAD_FLAG EQU FLAG2.3
    85  E 00040006         	NOT_QUICK_MODE_FLAG EQU FLAG2.4
    86  E 00050006         	TM_I2C_EEROR	EQU FLAG2.5
    87  E 00060006         	BLE_FLAG		EQU FLAG2.6
    88  E 00070006         	TMP_LEVEL_FLAG		EQU	FLAG2.7
    89  E 000200D2         	CLED_IO			EQU	P2.2
    90  E 000100D2         	SDATA_IO		EQU	P2.1
    91  E 000000D2         	SCL_IO			EQU	P2.0
    92  E 000300D2         	S_TM_EE_IO		EQU	P2.3
    93  E 000400D2         	BLEF	EQU	P2.4
    94  E 000500D2         	SDA_IO			EQU	P2.5
    95  E 000400D5         	VTM_IO			EQU	P5.4
    96  E 000000D0         	VSR_IO			EQU	P0.0
    97  E 000200C2         	CLED_CONT		EQU	P2M.2
    98  E 000100C2         	SDATA_CONT		EQU	P2M.1
    99  E 000000C2         	SCL_CONT		EQU	P2M.0
   100  E 000300C2         	S_TM_EE_CONT	EQU	P2M.3
   101  E 000500C2         	SDA_CONT		EQU	P2M.5
   102  E 000400C5         	VTM_CONT		EQU	P5M.4
   103  E 000000B8         	VSR_CONT		EQU	P0M.0
   104  00001B             ;***************************************
   105  E 000100D1         	VDDF			EQU	P1.1
   106  E 000000D1         	S_VDD_VCC_IO		EQU	P1.0
   107  E 000000C1         	S_VDD_VCC_CONT		EQU	P1M.0
   108  00001B             ;*************CODE_SECTION**********************	
   109  000000             .CODE
   110  000000             
   111  000000             		ORG	0
   112  000000   8035(2)  	JMP		START
   113  000008             		ORG	8H
   114  000008   8009(2)  	JMP		INT_SERVICE
   115  000009             INT_SERVICE:
   116  000009             ;KEEP ACC AND PFLAG
   117  000009   0400(1)  	PUSH
   118  00000A             ;T0 INTERRUPT
   119  00000A             JUST_T0:
   120  00000A   74C9(1+S)  	B0BTS0	FT0IEN
   121  00000B   7CC8(1+S)  	B0BTS1	FT0IRQ
   122  00000C   802A(2)  	JMP		JUST_TC0
   123  00000D   64C8(1)  	B0BCLR	FT0IRQ
   124  00000E             ;T0 INTERRUPT SERVISE PROGRESS
   125  00000E   71D1(1+S)  	B0BTS0	VDDF
   126  00000F   4A06(1)  	BSET 	NOT_UPLOAD_FLAG
   127  000010   71D1(1+S)  	B0BTS0	VDDF
   128  000011   4306(1)  	BCLR    HAVE_UPLOAD_FLAG
   129  000012             ;///////////////////////////////
   130  000012   5B06(1+S)  	BTS1	HAVE_UPLOAD_FLAG
   131  000013   8016(2)  	JMP		$+3
   132  000014   79D1(1+S)  	B0BTS1	VDDF
   133  000015   4C06(1)  	BSET	NOT_QUICK_MODE_FLAG
   134  000016   79D1(1+S)  	B0BTS1	VDDF
   135  000017   4B06(1)  	BSET    HAVE_UPLOAD_FLAG
   136  000018             ;//////////////////////////////////
   137  000018   1607(1+S)  	INCMS	TIMEH ;TIMEH=TIMEH+1,
   138  000019   2D78(1)  	MOV			A,#TIME_GAP
   139  00001A   1F10(1)  	MOV			CRCT2,A
   140  00001B   6286(1)  	B0BCLR		FC
   141  00001C   5706(1+S)  	BTS0		TMP_LEVEL_FLAG
   142  00001D   0910(1)  	RRCM		CRCT2
   143  00001E   1E10(1)  	MOV			A,CRCT2
   144  00001F   0707(1+S)  	CMPRS	A,TIMEH
   145  000020   8033(2)  	JMP		EXIT_INT
   146  000021   2B07(1)  	CLR		TIMEH
   147  000022   4B05(1)  	BSET	TIME_FLAG
   148  000023   1608(1+S)  	INCMS	TIMEG
   149  000024   1E15(1)  	MOV		A,TIME_DELAY_GAP
   150  000025   0708(1+S)  	CMPRS	A,TIMEG
   151  000026   8033(2)  	JMP		EXIT_INT
   152  000027   2B08(1)  	CLR		TIMEG
   153  000028   4805(1)  	BSET	READTM_FLAG
   154  000029   8033(2)  	JMP		EXIT_INT
   155  00002A             JUST_TC0:
   156  00002A   75C9(1+S)  	B0BTS0	FTC0IEN
   157  00002B   7DC8(1+S)  	B0BTS1	FTC0IRQ
   158  00002C   802F(2)  	JMP		JUST_INT0
   159  00002D   65C8(1)  	B0BCLR	FTC0IRQ
   160  00002E             ;TC0 INTERRUPT SERVICE PROGRESS
   161  00002E   8033(2)  	JMP		EXIT_INT
   162  00002F             JUST_INT0:
   163  00002F   70C9(1+S)  	B0BTS0	FP00IEN
   164  000030   78C8(1+S)  	B0BTS1	FP00IRQ
   165  000031   8033(2)  	JMP EXIT_INT
   166  000032   60C8(1)  	B0BCLR	FP00IRQ
   167  000033             ;INT0 INTERRUPT SERVISE PROGRESS
   168  000033             EXIT_INT:
   169  000033   0500(1)  	POP
   170  000034   0F00(2)  	RETI
   171  000035             ;*********************************************************
   172  000035             ;***********************STARRT**********************
   173  000035             START:
   174  000035   2D7F(1)  	MOV		A,#07FH
   175  000036   2FDF(1)  	B0MOV		STKP,A		;DISABLE GLOBAL INTERRUPT
   176  000037   2B86(1)  	CLR		PFLAG
   177  000038   2D00(1)  	MOV		A,#00H
   178  000039   2FCA(1)  	B0MOV		OSCM,A
   179  00003A   2D5A(1)  	MOV		A,#0X5A
   180  00003B   2FCC(1)  	B0MOV		WDTR,A	
   181  00003C   C199(2)  	CALL		CLRRAM
   182  00003D             STATE_INITIAL:
   183  00003D   C334(2)  	CALL		SYS_INIT_FUN
   184  00003E   67DF(1)  	B0BCLR		FGIE
   185  00003F             ;******************************************
   186  00003F   2D01(1)  	MOV		A,#DEFAULT_FRONT_TIME_DELAY
   187  000040   1F14(1)  	MOV		FRONT_DELAY,A
   188  000041   2D01(1)  	MOV		A,#DEFAULT_TIME_GAP
   189  000042   1F15(1)  	MOV		TIME_DELAY_GAP,A
   190  000043             ;////////////////////////////////
   191  000043   5606(1+S)  	BTS0		BLE_FLAG
   192  000044   8061(2)  	JMP			GET_INITIAL_DATA_FROM_EE
   193  000045             GET_TIME_INITIAL_TM:
   194  000045   6BD2(1)  	B0BSET	S_TM_EE_IO
   195  000046             ;Get initial time from tm
   196  000046   2D30(1)  	MOV		A,#TM_INITIAL_TIME_ADD_H
   197  000047   1F12(1)  	MOV		MAC_H,A
   198  000048   2D00(1)  	MOV		A,#TM_INITIAL_TIME_ADD_L
   199  000049   1F13(1)  	MOV		MAC_L,A
   200  00004A   C206(2)  	CALL	GET_DATA_FROM_TM_FUN
   201  00004B   1E0B(1)  	MOV		A,DATAH
   202  00004C   0600(1+S)  	CMPRS	A,#0X00
   203  00004D   1F18(1)  	MOV		INITIAL_TIMEH,A
   204  00004E   1E0C(1)  	MOV		A,DATAL
   205  00004F   0600(1+S)  	CMPRS	A,#0X00
   206  000050   1F19(1)  	MOV		INITIAL_TIMEL,A
   207  000051   C310(2)  	CALL	DELAY_SHORT
   208  000052             ;GET TIME DELAY AND GAP FROM TM
   209  000052   2D31(1)  	MOV		A,#TM_TIME_H
   210  000053   1F12(1)  	MOV		MAC_H,A
   211  000054   2D00(1)  	MOV		A,#TM_TIME_L
   212  000055   1F13(1)  	MOV		MAC_L,A
   213  000056   C206(2)  	CALL	GET_DATA_FROM_TM_FUN
   214  000057             ;the 2bit in front of DATAH is useness
   215  000057   2D3F(1)  	MOV		A,#0X3F
   216  000058   290B(1)  	AND		DATAH,A
   217  000059   1E0B(1)  	MOV			A,DATAH
   218  00005A   0600(1+S)  	CMPRS		A,#0X00
   219  00005B   1F14(1)  	MOV			FRONT_DELAY,A
   220  00005C   1E0C(1)  	MOV			A,DATAL
   221  00005D   0600(1+S)  	CMPRS		A,#0X00
   222  00005E   1F15(1)  	MOV			TIME_DELAY_GAP,A		
   223  00005F   63D2(1)  	B0BCLR		S_TM_EE_IO
   224  000060   C316(2)  	CALL		DELAY_LONG
   225  000061             ;*******************************************
   226  000061             GET_INITIAL_DATA_FROM_EE:
   227  000061             ;*******************************************
   228  000061   2D1F(1)  	MOV			A,#LAST_TIME_EE_ADD_H
   229  000062   1F12(1)  	MOV			MAC_H,A
   230  000063   2DFE(1)  	MOV			A,#LAST_TIME_EE_ADD_L
   231  000064   1F13(1)  	MOV			MAC_L,A
   232  000065   5105(1+S)  	BTS0		RESET_FLAG
   233  000066   80CC(2)  	JMP			RESET_EEPROM
   234  000067   C257(2)  	CALL		GET_DATA_FROM_EE_FUN
   235  000068   1E0E(1)  	MOV			A,ADDRESSL
   236  000069   1F17(1)  	MOV			STARTADDRL,A
   237  00006A   1E0D(1)  	MOV			A,ADDRESSH
   238  00006B   1F16(1)  	MOV			STARTADDRH,A
   239  00006C   1E0D(1)  	MOV			A,ADDRESSH
   240  00006D   06FF(1+S)  	CMPRS		A,#0XFF
   241  00006E   8071(2)  	JMP			$+3
   242  00006F   2B16(1)  	CLR			STARTADDRH
   243  000070   2B17(1)  	CLR			STARTADDRL
   244  000071   C316(2)  	CALL		DELAY_LONG
   245  000072   2D1F(1)  	MOV			A,#LIVE_TIME_ADD_H
   246  000073   1F12(1)  	MOV			MAC_H,A
   247  000074   2DFC(1)  	MOV			A,#LIVE_TIME_ADD_L
   248  000075   1F13(1)  	MOV			MAC_L,A
   249  000076   C257(2)  	CALL		GET_DATA_FROM_EE_FUN
   250  000077             ;;;;;;;;;;;;;;LAST READ TM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   251  000077   6BD2(1)  	B0BSET		S_TM_EE_IO
   252  000078   60D0(1)  	B0BCLR		VSR_IO
   253  000079   2D34(1)  	MOV			A,#TM_DATA_H
   254  00007A   1F12(1)  	MOV			MAC_H,A
   255  00007B   2D00(1)  	MOV			A,#TM_DATA_L
   256  00007C   1F13(1)  	MOV			MAC_L,A
   257  00007D   C206(2)  	CALL		GET_DATA_FROM_TM_FUN
   258  00007E   64D5(1)  	B0BCLR		VTM_IO
   259  00007F   C310(2)  	CALL		DELAY_SHORT
   260  000080   63D2(1)  	B0BCLR		S_TM_EE_IO
   261  000081   64C5(1)  	B0BCLR		VTM_CONT
   262  000082             ;////////////////////READ BLE INITIAL TIME /////////////////
   263  000082   5E06(1+S)  	BTS1		BLE_FLAG
   264  000083   80B1(2)  	JMP			WRITE_INITIAL_DATA_TO_EE
   265  000084             GET_INITIAL_TIME_FROM_EE:
   266  000084   C310(2)  	CALL		DELAY_SHORT
   267  000085   2D1F(1)  	MOV		A,#EE_INITIAL_TIME_ADD_H
   268  000086   1F12(1)  	MOV		MAC_H,A
   269  000087   2DFA(1)  	MOV		A,#EE_INITIAL_TIME_ADD_L
   270  000088   1F13(1)  	MOV		MAC_L,A
   271  000089   C257(2)  	CALL		GET_DATA_FROM_EE_FUN
   272  00008A   1E0D(1)  	MOV		A,ADDRESSH
   273  00008B   1F18(1)  	MOV		INITIAL_TIMEH,A
   274  00008C   1E0E(1)  	MOV		A,ADDRESSL
   275  00008D   1F19(1)  	MOV		INITIAL_TIMEL,A
   276  00008E   C316(2)  	CALL	DELAY_LONG
   277  00008F   2D1F(1)  	MOV		A,#EE_DELAY_ADD_H
   278  000090   1F12(1)  	MOV		MAC_H,A
   279  000091   2DF8(1)  	MOV		A,#EE_GAP_ADD_L
   280  000092   1F13(1)  	MOV		MAC_L,A
   281  000093   C257(2)  	CALL		GET_DATA_FROM_EE_FUN
   282  000094   1E0D(1)  	MOV		A,ADDRESSH
   283  000095   1F14(1)  	MOV		FRONT_DELAY,A
   284  000096   1E0E(1)  	MOV		A,ADDRESSL
   285  000097   1F15(1)  	MOV		TIME_DELAY_GAP,A
   286  000098   C316(2)  	CALL	DELAY_LONG
   287  000099             ;/////////////////WRITE TO TM//////////////////////////////
   288  000099             WRITE_INITIAL_DATA_TO_TM:
   289  000099   6BD2(1)  	B0BSET	S_TM_EE_IO
   290  00009A             ;PUT initial time TO tm
   291  00009A   2D30(1)  	MOV		A,#TM_INITIAL_TIME_ADD_H
   292  00009B   1F12(1)  	MOV		MAC_H,A
   293  00009C   2D00(1)  	MOV		A,#TM_INITIAL_TIME_ADD_L
   294  00009D   1F13(1)  	MOV		MAC_L,A
   295  00009E   1E18(1)  	MOV		A,INITIAL_TIMEH
   296  00009F   1F0B(1)  	MOV		DATAH,A
   297  0000A0   1E19(1)  	MOV		A,INITIAL_TIMEL
   298  0000A1   1F0C(1)  	MOV		DATAL,A
   299  0000A2   C1C4(2)  	CALL	PUT_DATA_INTO_TM_FUN
   300  0000A3             ;PUT TIME DELAY AND GAP TO TM
   301  0000A3   2D31(1)  	MOV		A,#TM_TIME_H
   302  0000A4   1F12(1)  	MOV		MAC_H,A
   303  0000A5   2D00(1)  	MOV		A,#TM_TIME_L
   304  0000A6   1F13(1)  	MOV		MAC_L,A
   305  0000A7             ;the 2bit in front of DATAH is useness
   306  0000A7   2D3F(1)  	MOV		A,#0X3F
   307  0000A8   2814(1)  	AND		A,FRONT_DELAY
   308  0000A9   1F0B(1)  	MOV		DATAH,A
   309  0000AA   1E15(1)  	MOV		A,TIME_DELAY_GAP
   310  0000AB   1F0C(1)  	MOV		DATAL,A	
   311  0000AC   C1C4(2)  	CALL	PUT_DATA_INTO_TM_FUN
   312  0000AD             ;the 2bit in front of DATAH is useness
   313  0000AD   63D2(1)  	B0BCLR		S_TM_EE_IO
   314  0000AE   C316(2)  	CALL		DELAY_LONG
   315  0000AF             ;///////////////////////////////
   316  0000AF   5606(1+S)  	BTS0	BLE_FLAG
   317  0000B0   80C6(2)  	JMP		SET_WRITE_EE_START_ADD
   318  0000B1             ;/////////////////WRITE TO EE//////////////////////////////
   319  0000B1             WRITE_INITIAL_DATA_TO_EE:
   320  0000B1             ;///////////INITIAL TIME/////////////////////
   321  0000B1   C310(2)  	CALL		DELAY_SHORT
   322  0000B2   2D1F(1)  	MOV		A,#EE_INITIAL_TIME_ADD_H
   323  0000B3   1F12(1)  	MOV		MAC_H,A
   324  0000B4   2DFA(1)  	MOV		A,#EE_INITIAL_TIME_ADD_L
   325  0000B5   1F13(1)  	MOV		MAC_L,A
   326  0000B6   1E18(1)  	MOV		A,INITIAL_TIMEH
   327  0000B7   1F0B(1)  	MOV		DATAH,A
   328  0000B8   1E19(1)  	MOV		A,INITIAL_TIMEL
   329  0000B9   1F0C(1)  	MOV		DATAL,A
   330  0000BA   C1A1(2)  	CALL		DATA_TO_EEPROM_FUN
   331  0000BB   C316(2)  	CALL	DELAY_LONG
   332  0000BC   2D1F(1)  	MOV		A,#EE_DELAY_ADD_H
   333  0000BD   1F12(1)  	MOV		MAC_H,A
   334  0000BE   2DF8(1)  	MOV		A,#EE_GAP_ADD_L
   335  0000BF   1F13(1)  	MOV		MAC_L,A
   336  0000C0   1E14(1)  	MOV		A,FRONT_DELAY
   337  0000C1   1F0B(1)  	MOV		DATAH,A
   338  0000C2   1E15(1)  	MOV		A,TIME_DELAY_GAP
   339  0000C3   1F0C(1)  	MOV		DATAL,A
   340  0000C4   C1A1(2)  	CALL		DATA_TO_EEPROM_FUN
   341  0000C5   C316(2)  	CALL	DELAY_LONG
   342  0000C6             
   343  0000C6             
   344  0000C6             SET_WRITE_EE_START_ADD:
   345  0000C6   1E16(1)  	MOV			A,STARTADDRH
   346  0000C7   1F0D(1)  	MOV			ADDRESSH,A
   347  0000C8   1E17(1)  	MOV			A,STARTADDRL
   348  0000C9   1F0E(1)  	MOV			ADDRESSL,A
   349  0000CA             	
   350  0000CA   5905(1+S)  	BTS1		RESET_FLAG
   351  0000CB   80EC(2)  	JMP			FRONT_DELAY_MODE
   352  0000CC             RESET_EEPROM:
   353  0000CC   2DFF(1)  	MOV		A,#0XFF
   354  0000CD   1F0B(1)  	MOV		DATAH,A
   355  0000CE   2DFF(1)  	MOV		A,#0XFF
   356  0000CF   1F0C(1)  	MOV		DATAL,A
   357  0000D0   2D00(1)  	MOV		A,#0X00
   358  0000D1   1F12(1)  	MOV		MAC_H,A
   359  0000D2             RESET_EE_LOOP_H:
   360  0000D2   2D00(1)  	MOV		A,#0X00
   361  0000D3   1F13(1)  	MOV		MAC_L,A
   362  0000D4             RESET_EE_LOOP_L:
   363  0000D4   C1A1(2)  	CALL		DATA_TO_EEPROM_FUN
   364  0000D5   1613(1+S)  	INCMS	MAC_L
   365  0000D6   80D4(2)  	JMP		RESET_EE_LOOP_L
   366  0000D7   1612(1+S)  	INCMS	MAC_H
   367  0000D8   1E12(1)  	MOV		A,MAC_H
   368  0000D9   0620(1+S)  	CMPRS	A,#0X20
   369  0000DA   80D2(2)  	JMP		RESET_EE_LOOP_H
   370  0000DB   2B0E(1)  	CLR		ADDRESSL
   371  0000DC   2B0D(1)  	CLR		ADDRESSH
   372  0000DD   2D1F(1)  	MOV		A,#LAST_TIME_EE_ADD_H
   373  0000DE   1F12(1)  	MOV		MAC_H,A
   374  0000DF   2DFE(1)  	MOV		A,#LAST_TIME_EE_ADD_L
   375  0000E0   1F13(1)  	MOV		MAC_L,A
   376  0000E1   1E0D(1)  	MOV		A,ADDRESSH
   377  0000E2   1F0B(1)  	MOV		DATAH,A
   378  0000E3   1E0E(1)  	MOV		A,ADDRESSL
   379  0000E4   1F0C(1)  	MOV		DATAL,A
   380  0000E5   C1A1(2)  	CALL		DATA_TO_EEPROM_FUN
   381  0000E6   2D1F(1)  	MOV			A,#LIVE_TIME_ADD_H
   382  0000E7   1F12(1)  	MOV			MAC_H,A
   383  0000E8   2DFC(1)  	MOV			A,#LIVE_TIME_ADD_L
   384  0000E9   1F13(1)  	MOV			MAC_L,A
   385  0000EA   C1A1(2)  	CALL		DATA_TO_EEPROM_FUN
   386  0000EB   4105(1)  	BCLR		RESET_FLAG
   387  0000EC             ;******************************************
   388  0000EC             FRONT_DELAY_MODE:
   389  0000EC   6FDF(1)  	B0BSET		FGIE
   390  0000ED   C36A(2)  	CALL		SET_LOW_POWER_FUN
   391  0000EE             ;DELAY WAIT_FOR_SEAVAL_MINITE_FUN
   392  0000EE             ;/////////////////////////////////////////	
   393  0000EE   1E14(1)  	MOV   	A,FRONT_DELAY
   394  0000EF   1F0F(1)  	MOV		CRCT1,A
   395  0000F0             FRONT_DELAY_LOOP:
   396  0000F0             	GreenMode
   397  0000F0   6CCA(1)  		B0BSET	FCPUM1
   398  0000F1   0000(1)  		NOP
   399  0000F2   0000(1)  		NOP
   400  0000F3   5406(1+S)  	BTS0	NOT_QUICK_MODE_FLAG
   401  0000F4   C361(2)  	CALL	SET_EE_TM_FUN
   402  0000F5   5206(1+S)  	BTS0	NOT_UPLOAD_FLAG
   403  0000F6   C36A(2)  	CALL	SET_LOW_POWER_FUN
   404  0000F7   5B05(1+S)  	BTS1	TIME_FLAG
   405  0000F8   80F0(2)  	JMP		FRONT_DELAY_LOOP
   406  0000F9   4305(1)  	BCLR	TIME_FLAG
   407  0000FA   260F(1+S)  	DECMS	CRCT1
   408  0000FB   80F0(2)  	JMP		FRONT_DELAY_LOOP
   409  0000FC             	;///////////////////////////
   410  0000FC   4206(1)  	BCLR		NOT_UPLOAD_FLAG
   411  0000FD   4306(1)  	BCLR		HAVE_UPLOAD_FLAG
   412  0000FE   4606(1)  	BCLR		BLE_FLAG
   413  0000FF             ;//////////////////////////////////////
   414  0000FF             MAIN:
   415  0000FF             	;close tc0 interrupt until the recording finished 
   416  0000FF             	GreenMode
   417  0000FF   6CCA(1)  		B0BSET	FCPUM1
   418  000100   0000(1)  		NOP
   419  000101   0000(1)  		NOP
   420  000102             	
   421  000102             JUST_I2CSLAVE_MODE:
   422  000102   5805(1+S)  	BTS1	READTM_FLAG
   423  000103   8157(2)  	JMP		JUST_UPLOAD_MODE
   424  000104   5505(1+S)  	BTS0	FILLOUT_FLAG
   425  000105   8175(2)  	JMP		MEM_FILLOUT_MODE
   426  000106   7CC9(1+S)  	B0BTS1	FT0IEN
   427  000107   8157(2)  	JMP		JUST_UPLOAD_MODE
   428  000108             ;*****START TM I2C SLAVE MODE***********
   429  000108             I2CSLAVE_MODE:
   430  000108   4005(1)  	BCLR 	READTM_FLAG
   431  000109   59D1(1+S)  	BTS1	VDDF
   432  00010A   8149(2)  	JMP		ADDRESS_CHANGE
   433  00010B   5CD2(1+S)  	BTS1	BLEF
   434  00010C   8149(2)  	JMP		ADDRESS_CHANGE
   435  00010D   4606(1)  	BCLR	BLE_FLAG
   436  00010E   67DF(1)  	B0BCLR 	FGIE
   437  00010F   6CC5(1)  	B0BSET	VTM_CONT
   438  000110   6BD2(1)  	B0BSET	S_TM_EE_IO
   439  000111   60D0(1)  	B0BCLR	VSR_IO
   440  000112   2D34(1)  	MOV		A,#TM_DATA_H
   441  000113   1F12(1)  	MOV		MAC_H,A
   442  000114   2D00(1)  	MOV		A,#TM_DATA_L
   443  000115   1F13(1)  	MOV		MAC_L,A
   444  000116   C206(2)  	CALL	GET_DATA_FROM_TM_FUN
   445  000117   64D5(1)  	B0BCLR		VTM_IO
   446  000118   C310(2)  	CALL		DELAY_SHORT
   447  000119             ;compare temperature is over the set level
   448  000119   4706(1)  	BCLR		TMP_LEVEL_FLAG
   449  00011A   1E0B(1)  	MOV			A,DATAH
   450  00011B   1F1A(1)  	MOV			TEMPERATURE_H,A
   451  00011C   2D20(1)  	MOV			A,#HIGT_TMP_LEVEL1
   452  00011D   220B(1)  	SUB			A,DATAH
   453  00011E   7A86(1+S)  	B0BTS1		FC
   454  00011F   4F06(1)  	BSET		TMP_LEVEL_FLAG
   455  000120   2D05(1)  	MOV			A,#LOW_TMP_LEVEL1
   456  000121   220B(1)  	SUB			A,DATAH
   457  000122   7286(1+S)  	B0BTS0		FC
   458  000123   4F06(1)  	BSET		TMP_LEVEL_FLAG
   459  000124             ;////////////////////////////////////////
   460  000124   63D2(1)  	B0BCLR		S_TM_EE_IO
   461  000125   64C5(1)  	B0BCLR		VTM_CONT
   462  000126   C310(2)  	CALL		DELAY_SHORT
   463  000127   1E0D(1)  	MOV		A,ADDRESSH
   464  000128   1F12(1)  	MOV		MAC_H,A
   465  000129   1E0E(1)  	MOV		A,ADDRESSL
   466  00012A   1F13(1)  	MOV		MAC_L,A
   467  00012B   C1A1(2)  	CALL		DATA_TO_EEPROM_FUN
   468  00012C   2D1F(1)  	MOV		A,#LAST_TIME_EE_ADD_H
   469  00012D   1F12(1)  	MOV		MAC_H,A
   470  00012E   2DFE(1)  	MOV		A,#LAST_TIME_EE_ADD_L
   471  00012F   1F13(1)  	MOV		MAC_L,A
   472  000130   1E0D(1)  	MOV		A,ADDRESSH
   473  000131   1F0B(1)  	MOV		DATAH,A
   474  000132   1E0E(1)  	MOV		A,ADDRESSL
   475  000133   1F0C(1)  	MOV		DATAL,A
   476  000134   C1A1(2)  	CALL		DATA_TO_EEPROM_FUN
   477  000135   74C8(1+S)  	B0BTS0		FT0IRQ
   478  000136   1607(1+S)  	INCMS		TIMEH
   479  000137   64C8(1)  	B0BCLR		FT0IRQ
   480  000138   6FDF(1)  	B0BSET		FGIE
   481  000139   2D78(1)  	MOV			A,#TIME_GAP
   482  00013A   1F10(1)  	MOV			CRCT2,A
   483  00013B   6286(1)  	B0BCLR		FC
   484  00013C   5706(1+S)  	BTS0		TMP_LEVEL_FLAG
   485  00013D   0910(1)  	RRCM		CRCT2
   486  00013E   1E10(1)  	MOV			A,CRCT2
   487  00013F   0707(1+S)  	CMPRS		A,TIMEH
   488  000140   8149(2)  	JMP			ADDRESS_CHANGE
   489  000141   2B07(1)  	CLR			TIMEH
   490  000142   4B05(1)  	BSET		TIME_FLAG
   491  000143   1608(1+S)  	INCMS		TIMEG
   492  000144   1E15(1)  	MOV			A,TIME_DELAY_GAP
   493  000145   0708(1+S)  	CMPRS		A,TIMEG
   494  000146   8149(2)  	JMP			ADDRESS_CHANGE
   495  000147   2B08(1)  	CLR			TIMEG
   496  000148   4805(1)  	BSET		READTM_FLAG
   497  000149             ADDRESS_CHANGE:
   498  000149   2D02(1)  	MOV			A,#0X02
   499  00014A   130E(1)  	ADD			ADDRESSL,A
   500  00014B   2D00(1)  	MOV			A,#0X00
   501  00014C   110D(1)  	ADC			ADDRESSH,A
   502  00014D   2D1F(1)  	MOV			A,#MAX_MEMH
   503  00014E   070D(1+S)  	CMPRS		A,ADDRESSH
   504  00014F   8102(2)  	JMP			JUST_I2CSLAVE_MODE
   505  000150   2DDE(1)  	MOV			A,#MAX_MEML
   506  000151   070E(1+S)  	CMPRS		A,ADDRESSL
   507  000152   8102(2)  	JMP			JUST_I2CSLAVE_MODE
   508  000153   4D05(1)  	BSET		FILLOUT_FLAG
   509  000154   67D8(1)  	B0BCLR		FT0ENB
   510  000155   64C9(1)  	B0BCLR		FT0IEN
   511  000156   8175(2)  	JMP			MEM_FILLOUT_MODE
   512  000157             ;*****************************************
   513  000157             JUST_UPLOAD_MODE:
   514  000157   62C2(1)  	B0BCLR		CLED_CONT
   515  000158   C310(2)  	CALL		DELAY_SHORT
   516  000159   C310(2)  	CALL		DELAY_SHORT
   517  00015A   7AD2(1+S)  	B0BTS1		CLED_IO
   518  00015B   818B(2)  	JMP			RESET_MODE
   519  00015C             BLE_EE_UPLOAD_MODE:
   520  00015C   5606(1+S)  	BTS0		BLE_FLAG
   521  00015D   8163(2)  	JMP			END_BLE_EE_MODE
   522  00015E   54D2(1+S)  	BTS0		BLEF
   523  00015F   8167(2)  	JMP			TM_EE_UPLOAD_MODE
   524  000160   4E06(1)  	BSET		BLE_FLAG
   525  000161   C36A(2)  	CALL		SET_LOW_POWER_FUN
   526  000162   8175(2)  	JMP			MEM_FILLOUT_MODE
   527  000163             END_BLE_EE_MODE:
   528  000163   5CD2(1+S)  	BTS1		BLEF
   529  000164   8175(2)  	JMP			MEM_FILLOUT_MODE
   530  000165   C36A(2)  	CALL		SET_LOW_POWER_FUN
   531  000166   4606(1)  	BCLR		BLE_FLAG
   532  000167             TM_EE_UPLOAD_MODE:
   533  000167   5205(1+S)  	BTS0		TM_EE_FLAG
   534  000168   816F(2)  	JMP			END_TM_EE_MODE
   535  000169   51D1(1+S)  	BTS0		VDDF
   536  00016A   8175(2)  	JMP			MEM_FILLOUT_MODE
   537  00016B             TM_EE_MODE:
   538  00016B   4306(1)  	BCLR		HAVE_UPLOAD_FLAG
   539  00016C   5205(1+S)  	BTS0		TM_EE_FLAG
   540  00016D   816F(2)  	JMP			END_TM_EE_MODE
   541  00016E   C361(2)  	CALL		SET_EE_TM_FUN
   542  00016F             END_TM_EE_MODE:
   543  00016F             	;BTS0		FILLOUT_FLAG
   544  00016F             	;JMP			MEM_FILLOUT_MODE	
   545  00016F   59D1(1+S)  	BTS1		VDDF
   546  000170   8175(2)  	JMP			MEM_FILLOUT_MODE
   547  000171   C36A(2)  	CALL		SET_LOW_POWER_FUN
   548  000172   5505(1+S)  	BTS0		FILLOUT_FLAG
   549  000173   8175(2)  	JMP			MEM_FILLOUT_MODE
   550  000174             	;we should keep rtc function 
   551  000174   8182(2)  	JMP		ON_LED_MODE
   552  000175             ;*************************************
   553  000175             MEM_FILLOUT_MODE:
   554  000175   5D05(1+S)  	BTS1	FILLOUT_FLAG
   555  000176   8182(2)  	JMP		ON_LED_MODE
   556  000177             ;***************************
   557  000177             	;B0BTS1	VDDF
   558  000177             	;JMP		$+4
   559  000177             	;BTS0	TM_EE_FLAG
   560  000177             	;CALL	SET_LOW_POWER_FUN
   561  000177             	;JMP		$+3
   562  000177             	;BTS1	TM_EE_FLAG
   563  000177             	;CALL	SET_EE_TM_FUN
   564  000177             ;********************************
   565  000177   7FD8(1+S)  	B0BTS1		FT0ENB
   566  000178   817C(2)  	JMP			$+4
   567  000179   2BD9(1)  	CLR			T0C
   568  00017A   64C8(1)  	B0BCLR		FT0IRQ
   569  00017B   64C9(1)  	B0BCLR		FT0IEN
   570  00017C   67D8(1)  	B0BCLR		FT0ENB
   571  00017D             	SleepMode
   572  00017D   6BCA(1)  		B0BSET	FCPUM0
   573  00017E             END_FILLOUT_MODE:
   574  00017E   6AC2(1)  	B0BSET		CLED_CONT
   575  00017F   6AD2(1)  	B0BSET		CLED_IO
   576  000180   C30B(2)  	CALL		DELAY_MINI
   577  000181   8157(2)  	JMP		JUST_UPLOAD_MODE
   578  000182             ON_LED_MODE:
   579  000182   6AC2(1)  	B0BSET	CLED_CONT
   580  000183   6AD2(1)  	B0BSET	CLED_IO
   581  000184   5106(1+S)  	BTS0	READ_LED_FLAG
   582  000185   C190(2)  	CALL	READ_LED_FUN
   583  000186   4106(1)  	BCLR   	READ_LED_FLAG
   584  000187   6AD2(1)  	B0BSET	CLED_IO
   585  000188   5505(1+S)  	BTS0	FILLOUT_FLAG
   586  000189   8157(2)  	JMP		JUST_UPLOAD_MODE
   587  00018A   80FF(2)  	JMP		MAIN
   588  00018B             RESET_MODE:
   589  00018B   4905(1)  	BSET	RESET_FLAG
   590  00018C   4505(1)  	BCLR	FILLOUT_FLAG
   591  00018D   2B07(1)  	CLR		TIMEH
   592  00018E   2B08(1)  	CLR		TIMEG
   593  00018F   803D(2)  	JMP		STATE_INITIAL
   594  000190             	
   595  000190             ;******************************************************************************	
   596  000190             READ_LED_FUN:
   597  000190   2D01(1)     	MOV  	   	A,#1
   598  000191   1F04(1)     	MOV  	   	TLC2,A
   599  000192             LED_MODEL1:	
   600  000192   6AD2(1)     	B0BSET   	CLED_IO
   601  000193   C320(2)     	CALL   	   	DELAY_LED
   602  000194   62D2(1)     	B0BCLR   	CLED_IO
   603  000195   C320(2)     	CALL   	   	DELAY_LED
   604  000196   2604(1+S)     	DECMS   	TLC2
   605  000197   8192(2)     	JMP   	   	LED_MODEL1
   606  000198   0E00(2)     	RET
   607  000199             ;*******************************************************
   608  000199             ;***************************************
   609  000199             	
   610  000199             	
   611  000199             	
   612  000199             	
   613  000199             	
   614  000199             	
   615  000199             	
   616  000199             	
   617  000199             	
   618  000199             	
   619  000199             	
   620  000199             	
   621  000199             	
   622  000199             	
   623  000199             	
   624  000199             	
   625  000199             CLRRAM:
   626  000199             	
   627  000199   2B84(1)  	CLR			Y
   628  00019A   2D2F(1)  	MOV			A,#END_RAM_ADDR
   629  00019B   2F83(1)  	B0MOV		Z,A
   630  00019C             CLRRAM10:
   631  00019C   2BE7(1)  	CLR			@YZ
   632  00019D   2683(1+S)  	DECMS		Z
   633  00019E   819C(2)  	JMP			CLRRAM10
   634  00019F   2BE7(1)  	CLR			@YZ
   635  0001A0   0E00(2)  	RET
   636  0001A1             ;***********************************
   637  0001A1             ;***************************************
   638  0001A1             ;*************WRITE TMEPERATURE INTO EEPROM*************
   639  0001A1             ;*************RECORDING ADDRESS THE LAST TIME STORAGE THE TMPERATURE VALUE************
   640  0001A1             ;**************************************
   641  0001A1             DATA_TO_EEPROM_FUN:
   642  0001A1   6DC2(1)  	B0BSET		SDA_CONT
   643  0001A2   6DD2(1)  	B0BSET		SDA_IO
   644  0001A3   68C2(1)  	B0BSET		SCL_CONT
   645  0001A4   68D2(1)  	B0BSET		SCL_IO
   646  0001A5   1E13(1)  	MOV			A,MAC_L
   647  0001A6   1F10(1)  	MOV			CRCT2,A
   648  0001A7   1E0B(1)  	MOV			A,DATAH
   649  0001A8   1F0F(1)  	MOV			CRCT1,A
   650  0001A9   2D02(1)  	MOV			A,#0X02
   651  0001AA   1F04(1)  	MOV			TLC2,A
   652  0001AB             MOVE_DATA_TO_EEPROM:
   653  0001AB   C283(2)  	CALL		I2C_START_EE
   654  0001AC   2DA0(1)  	MOV			A,#EEW_ADD
   655  0001AD   1F09(1)  	MOV			DATA_IN,A
   656  0001AE   C2D4(2)  	CALL		EEADDRESS_ASK
   657  0001AF   1E12(1)  	MOV			A,MAC_H
   658  0001B0   1F09(1)  	MOV			DATA_IN,A
   659  0001B1   C2D4(2)  	CALL		EEADDRESS_ASK
   660  0001B2   1E10(1)  	MOV			A,CRCT2
   661  0001B3   1F09(1)  	MOV			DATA_IN,A
   662  0001B4   C2D4(2)  	CALL		EEADDRESS_ASK
   663  0001B5   C30B(2)  	CALL		DELAY_MINI
   664  0001B6   1E0F(1)  	MOV			A,CRCT1
   665  0001B7   1F09(1)  	MOV			DATA_IN,A
   666  0001B8   C2D4(2)  	CALL		EEADDRESS_ASK
   667  0001B9   C289(2)  	CALL		I2C_END_EE
   668  0001BA             	
   669  0001BA   C316(2)  	CALL		DELAY_LONG
   670  0001BB   2D01(1)  	MOV			A,#0X01
   671  0001BC   1310(1)  	ADD			CRCT2,A
   672  0001BD   1E0C(1)  	MOV			A,DATAL
   673  0001BE   1F0F(1)  	MOV			CRCT1,A
   674  0001BF   2604(1+S)  	DECMS		TLC2
   675  0001C0   81AB(2)  	JMP			MOVE_DATA_TO_EEPROM
   676  0001C1             ;*********************************************
   677  0001C1   60C2(1)  	B0BCLR		SCL_CONT
   678  0001C2   65C2(1)  	B0BCLR		SDA_CONT
   679  0001C3   0E00(2)  	RET
   680  0001C4             ;**************************************
   681  0001C4             PUT_DATA_INTO_TM_FUN:
   682  0001C4   68C2(1)  	B0BSET	SCL_CONT
   683  0001C5   69C2(1)  	B0BSET	SDATA_CONT
   684  0001C6   61D2(1)  	B0BCLR	SDATA_IO
   685  0001C7   60D2(1)  	B0BCLR	SCL_IO
   686  0001C8   C316(2)  	CALL 	DELAY_LONG
   687  0001C9   C316(2)  	CALL 	DELAY_LONG
   688  0001CA   6CD5(1)  	B0BSET 	VTM_IO
   689  0001CB   C316(2)  	CALL 	DELAY_LONG
   690  0001CC             	;CALL	DELAY_LONG
   691  0001CC             START_TMI2C_S:
   692  0001CC   2D04(1)  	MOV 	A,#0X04
   693  0001CD   1F03(1)  	MOV 	TLC0,A
   694  0001CE             LOOP_1_S:
   695  0001CE   68D2(1)  	B0BSET 	SCL_IO
   696  0001CF   C30B(2)  	CALL	DELAY_MINI;13US
   697  0001D0   C30A(2)  	CALL	CALL_DELAY
   698  0001D1   60D2(1)  	B0BCLR 	SCL_IO
   699  0001D2   C30B(2)  	CALL 	DELAY_MINI
   700  0001D3   2603(1+S)  	DECMS  	TLC0
   701  0001D4   81CE(2)  	JMP 	LOOP_1_S
   702  0001D5   41D2(1)  	BCLR 	SDATA_IO
   703  0001D6   C316(2)  	CALL	DELAY_LONG
   704  0001D7   C316(2)  	CALL	DELAY_LONG
   705  0001D8   2D04(1)  	MOV 	A,#4
   706  0001D9   2F03(1)  	B0MOV 	TLC0,A
   707  0001DA             LOOP_2_S:
   708  0001DA   60D2(1)  	B0BCLR 	SCL_IO
   709  0001DB   C30B(2)  	CALL	DELAY_MINI
   710  0001DC   C30A(2)  	CALL	CALL_DELAY
   711  0001DD   68D2(1)  	B0BSET 	SCL_IO
   712  0001DE   C30B(2)  	CALL	DELAY_MINI
   713  0001DF   2603(1+S)  	DECMS 	TLC0
   714  0001E0   81DA(2)  	JMP 	LOOP_2_S
   715  0001E1   C310(2)  	CALL	DELAY_SHORT
   716  0001E2   2D14(1)  	MOV 	A,#20
   717  0001E3   2F03(1)  	B0MOV 	TLC0,A
   718  0001E4   49D2(1)  	BSET 	SDATA_IO
   719  0001E5             WAIT_TM_INIT_S:
   720  0001E5   C316(2)  	CALL 		DELAY_LONG
   721  0001E6   2603(1+S)  	DECMS 		TLC0
   722  0001E7   81E5(2)  	JMP 		WAIT_TM_INIT_S
   723  0001E8             ;**************START*****************************
   724  0001E8   C290(2)  	CALL		I2C_START_TM
   725  0001E9             ;***********************************************
   726  0001E9   2D3C(1)  	MOV 		A,#TMW_ADD
   727  0001EA   1F09(1)  	MOV 		DATA_IN,A
   728  0001EB   C29E(2)  	CALL 		TMADDRESS_ASK
   729  0001EC   5506(1+S)  	BTS0		TM_I2C_EEROR
   730  0001ED   8200(2)  	JMP			END_TM_S
   731  0001EE   1E12(1)  	MOV 		A,MAC_H
   732  0001EF   1F09(1)  	MOV 		DATA_IN,A
   733  0001F0   C29E(2)  	CALL 		TMADDRESS_ASK
   734  0001F1   1E13(1)  	MOV 		A,MAC_L
   735  0001F2   1F09(1)  	MOV 		DATA_IN,A
   736  0001F3   C29E(2)  	CALL 		TMADDRESS_ASK
   737  0001F4   C316(2)  	CALL		DELAY_LONG
   738  0001F5   1E0B(1)  	MOV 		A,DATAH
   739  0001F6   1F09(1)  	MOV 		DATA_IN,A
   740  0001F7   C29E(2)  	CALL 		TMADDRESS_ASK
   741  0001F8   1E0C(1)  	MOV 		A,DATAL
   742  0001F9   1F09(1)  	MOV 		DATA_IN,A
   743  0001FA   C29E(2)  	CALL 		TMADDRESS_ASK
   744  0001FB   C310(2)  	CALL		DELAY_SHORT
   745  0001FC             ;**************END*******************************
   746  0001FC   C296(2)  	CALL		I2C_END_TM
   747  0001FD   C316(2)  	CALL		DELAY_LONG
   748  0001FE   C316(2)  	CALL		DELAY_LONG
   749  0001FF   61D2(1)  	B0BCLR		SDATA_IO
   750  000200             END_TM_S:
   751  000200   4506(1)  	BCLR		TM_I2C_EEROR
   752  000201   64D5(1)  	B0BCLR 		VTM_IO
   753  000202   61C2(1)  	B0BCLR		SDATA_CONT
   754  000203   60C2(1)  	B0BCLR		SCL_CONT
   755  000204   C310(2)  	CALL 		DELAY_SHORT
   756  000205   0E00(2)  	RET
   757  000206             ;*******************************************
   758  000206             ;*****************************************
   759  000206             GET_DATA_FROM_TM_FUN:
   760  000206   2D0F(1)  	MOV		A,#0X0F
   761  000207   1F11(1)  	MOV		COUNT,A
   762  000208             TM_I2C_WORK_LOOP:
   763  000208   68C2(1)  	B0BSET	SCL_CONT
   764  000209   69C2(1)  	B0BSET	SDATA_CONT
   765  00020A   61D2(1)  	B0BCLR	SDATA_IO
   766  00020B   60D2(1)  	B0BCLR	SCL_IO
   767  00020C   C316(2)  	CALL 	DELAY_LONG
   768  00020D   C316(2)  	CALL 	DELAY_LONG
   769  00020E   6CD5(1)  	B0BSET 	VTM_IO
   770  00020F   C316(2)  	CALL 	DELAY_LONG
   771  000210             	;CALL	DELAY_LONG
   772  000210             START_TMI2C:
   773  000210   2D04(1)  	MOV 	A,#0X04
   774  000211   1F03(1)  	MOV 	TLC0,A
   775  000212             LOOP_1:
   776  000212   68D2(1)  	B0BSET 	SCL_IO
   777  000213   C30B(2)  	CALL	DELAY_MINI;13US
   778  000214   C30A(2)  	CALL	CALL_DELAY
   779  000215   60D2(1)  	B0BCLR 	SCL_IO
   780  000216   C30B(2)  	CALL 	DELAY_MINI
   781  000217   2603(1+S)  	DECMS  	TLC0
   782  000218   8212(2)  	JMP 	LOOP_1
   783  000219   2D28(1)  	MOV 	A,#40
   784  00021A   2F03(1)  	B0MOV 	TLC0,A
   785  00021B   41D2(1)  	BCLR 	SDATA_IO
   786  00021C   C316(2)  	CALL	DELAY_LONG
   787  00021D             	;CALL	DELAY_SHORT
   788  00021D   2D04(1)  	MOV 	A,#4
   789  00021E   2F03(1)  	B0MOV 	TLC0,A
   790  00021F             LOOP_2:
   791  00021F   60D2(1)  	B0BCLR 	SCL_IO
   792  000220   C30B(2)  	CALL	DELAY_MINI
   793  000221   C30A(2)  	CALL	CALL_DELAY
   794  000222   68D2(1)  	B0BSET 	SCL_IO
   795  000223   C30B(2)  	CALL	DELAY_MINI
   796  000224   2603(1+S)  	DECMS 	TLC0
   797  000225   821F(2)  	JMP 	LOOP_2
   798  000226   C310(2)  	CALL	DELAY_SHORT
   799  000227   2D05(1)  	MOV 	A,#5
   800  000228   2F03(1)  	B0MOV 	TLC0,A
   801  000229   49D2(1)  	BSET 	SDATA_IO
   802  00022A             WAIT_TM_INIT:
   803  00022A   C316(2)  	CALL 		DELAY_LONG
   804  00022B   2603(1+S)  	DECMS 		TLC0
   805  00022C   822A(2)  	JMP 		WAIT_TM_INIT
   806  00022D             ;**************START*****************************
   807  00022D   C290(2)  	CALL		I2C_START_TM
   808  00022E             ;***********************************************
   809  00022E   2D3D(1)  	MOV 		A,#TMR_ADD
   810  00022F   1F09(1)  	MOV 		DATA_IN,A
   811  000230   C29E(2)  	CALL 		TMADDRESS_ASK
   812  000231   5506(1+S)  	BTS0		TM_I2C_EEROR
   813  000232   8251(2)  	JMP			END_TM
   814  000233   1E12(1)  	MOV 		A,MAC_H
   815  000234   1F09(1)  	MOV 		DATA_IN,A
   816  000235   C29E(2)  	CALL 		TMADDRESS_ASK
   817  000236   1E13(1)  	MOV 		A,MAC_L
   818  000237   1F09(1)  	MOV 		DATA_IN,A
   819  000238   C29E(2)  	CALL 		TMADDRESS_ASK
   820  000239   61C2(1)  	B0BCLR		SDATA_CONT
   821  00023A   C316(2)  	CALL 		DELAY_LONG
   822  00023B   4705(1)  	BCLR 		ASK_FLAG
   823  00023C   C2B8(2)  	CALL 		TMDATA_ASK
   824  00023D   1E0A(1)  	MOV 		A,DATA_OUT
   825  00023E   1F0B(1)  	MOV 		DATAH,A
   826  00023F   4F05(1)  	BSET 		ASK_FLAG
   827  000240   C2B8(2)  	CALL 		TMDATA_ASK
   828  000241   1E0A(1)  	MOV 		A,DATA_OUT
   829  000242   1F0C(1)  	MOV 		DATAL,A		
   830  000243             ;**************END*******************************
   831  000243   C296(2)  	CALL		I2C_END_TM
   832  000244   C310(2)  	CALL		DELAY_SHORT
   833  000245   61D2(1)  	B0BCLR		SDATA_IO
   834  000246   2611(1+S)  	DECMS		COUNT
   835  000247   8249(2)  	JMP			$+2
   836  000248   8251(2)  	JMP			END_TM
   837  000249   64D5(1)  	B0BCLR 		VTM_IO
   838  00024A   2D00(1)  	MOV			A,#0X00
   839  00024B   070B(1+S)  	CMPRS		A,DATAH
   840  00024C   8250(2)  	JMP			$+4
   841  00024D   070C(1+S)  	CMPRS		A,DATAL
   842  00024E   8250(2)  	JMP			$+2
   843  00024F   8208(2)  	JMP			TM_I2C_WORK_LOOP
   844  000250   4906(1)  	BSET		READ_LED_FLAG
   845  000251             END_TM:
   846  000251   4506(1)  	BCLR		TM_I2C_EEROR
   847  000252   64D5(1)  	B0BCLR 		VTM_IO
   848  000253   61C2(1)  	B0BCLR		SDATA_CONT
   849  000254   60C2(1)  	B0BCLR		SCL_CONT
   850  000255   C310(2)  	CALL 		DELAY_SHORT
   851  000256   0E00(2)  	RET
   852  000257             ;*******************************************
   853  000257             ;***********************************************************
   854  000257             ;*********************************************************
   855  000257             GET_DATA_FROM_EE_FUN:
   856  000257   68C2(1)  	B0BSET		SCL_CONT
   857  000258   6DC2(1)  	B0BSET		SDA_CONT
   858  000259   6DD2(1)  	B0BSET		SDA_IO
   859  00025A   68D2(1)  	B0BSET		SCL_IO
   860  00025B   C310(2)  	CALL		DELAY_SHORT
   861  00025C   C283(2)  	CALL		I2C_START_EE
   862  00025D   2DA0(1)  	MOV			A,#EEW_ADD
   863  00025E   1F09(1)  	MOV			DATA_IN,A
   864  00025F   C2D4(2)  	CALL		EEADDRESS_ASK
   865  000260   1E12(1)  	MOV			A,MAC_H
   866  000261   1F09(1)  	MOV			DATA_IN,A
   867  000262   C2D4(2)  	CALL		EEADDRESS_ASK
   868  000263   1E13(1)  	MOV			A,MAC_L
   869  000264   1F09(1)  	MOV			DATA_IN,A
   870  000265   C2D4(2)  	CALL		EEADDRESS_ASK
   871  000266   6DD2(1)  	B0BSET		SDA_IO
   872  000267   C310(2)  	CALL		DELAY_SHORT
   873  000268   68D2(1)  	B0BSET		SCL_IO
   874  000269   C310(2)  	CALL		DELAY_SHORT
   875  00026A   C283(2)  	CALL		I2C_START_EE
   876  00026B   C310(2)  	CALL		DELAY_SHORT
   877  00026C   2DA1(1)  	MOV			A,#EER_ADD
   878  00026D   1F09(1)  	MOV			DATA_IN,A
   879  00026E   C2D4(2)  	CALL		EEADDRESS_ASK
   880  00026F   65C2(1)  	B0BCLR		SDA_CONT
   881  000270   4705(1)  	BCLR		ASK_FLAG
   882  000271   C2EE(2)  	CALL		EEDATA_ASK
   883  000272   1E0A(1)  	MOV			A,DATA_OUT
   884  000273   1F0D(1)  	MOV			ADDRESSH,A
   885  000274   65C2(1)  	B0BCLR		SDA_CONT
   886  000275   C30B(2)  	CALL		DELAY_MINI
   887  000276   4F05(1)  	BSET		ASK_FLAG
   888  000277   C2EE(2)  	CALL		EEDATA_ASK
   889  000278   1E0A(1)  	MOV			A,DATA_OUT
   890  000279   1F0E(1)  	MOV			ADDRESSL,A
   891  00027A   C289(2)  	CALL		I2C_END_EE
   892  00027B             ;*************************************
   893  00027B   C310(2)  	CALL		DELAY_SHORT
   894  00027C   60C2(1)  	B0BCLR		SCL_CONT
   895  00027D   65C2(1)  	B0BCLR		SDA_CONT
   896  00027E   0E00(2)  	RET
   897  00027F             ;************************************************
   898  00027F             I2C_EEROR:
   899  00027F             	;open interrupt
   900  00027F             	;SleepMode
   901  00027F   4605(1)  	BCLR	I2CERROR_FLAG
   902  000280   54D5(1+S)  	BTS0	VTM_IO
   903  000281   4D06(1)  	BSET	TM_I2C_EEROR
   904  000282   0E00(2)  	RET
   905  000283             I2C_START_EE:
   906  000283   C30B(2)  	CALL		DELAY_MINI
   907  000284   65D2(1)  	B0BCLR 		SDA_IO
   908  000285   C30B(2)  	CALL 		DELAY_MINI
   909  000286   60D2(1)  	B0BCLR 		SCL_IO
   910  000287   C30B(2)  	CALL 		DELAY_MINI
   911  000288   0E00(2)  	RET
   912  000289             I2C_END_EE:
   913  000289   65D2(1)  	B0BCLR 		SDA_IO
   914  00028A   C30B(2)  	CALL 		DELAY_MINI
   915  00028B   68D2(1)  	B0BSET 		SCL_IO
   916  00028C   C30B(2)  	CALL 		DELAY_MINI
   917  00028D   6DD2(1)  	B0BSET 		SDA_IO
   918  00028E   C30B(2)  	CALL		DELAY_MINI
   919  00028F   0E00(2)  	RET
   920  000290             I2C_START_TM:
   921  000290   C30B(2)  	CALL		DELAY_MINI
   922  000291   61D2(1)  	B0BCLR 		SDATA_IO
   923  000292   C30B(2)  	CALL 		DELAY_MINI
   924  000293   60D2(1)  	B0BCLR 		SCL_IO
   925  000294   C30B(2)  	CALL 		DELAY_MINI
   926  000295   0E00(2)  	RET
   927  000296             I2C_END_TM:
   928  000296   61D2(1)  	B0BCLR 		SDATA_IO
   929  000297   C30B(2)  	CALL 		DELAY_MINI
   930  000298   60D2(1)  	B0BCLR		SCL_IO
   931  000299   C30B(2)  	CALL		DELAY_MINI
   932  00029A   69D2(1)  	B0BSET 		SDATA_IO
   933  00029B   C30B(2)  	CALL		DELAY_MINI
   934  00029C   68D2(1)  	B0BSET 		SCL_IO
   935  00029D   0E00(2)  	RET
   936  00029E             TMADDRESS_ASK:
   937  00029E   2D08(1)  	MOV 		A,#8
   938  00029F   1F02(1)  	MOV 		TIMEOUT,A
   939  0002A0             TMADDRESS_LOOP:
   940  0002A0   5709(1+S)  	BTS0		DATA_IN.7
   941  0002A1   82A5(2)  	JMP 		MD_1
   942  0002A2   71D2(1+S)  	B0BTS0 		SDATA_IO
   943  0002A3   61D2(1)  	B0BCLR		SDATA_IO
   944  0002A4   82A7(2)  	JMP 		NEXT_1
   945  0002A5             MD_1:
   946  0002A5   79D2(1+S)  	B0BTS1 		SDATA_IO
   947  0002A6   69D2(1)  	B0BSET		SDATA_IO
   948  0002A7             NEXT_1:
   949  0002A7   C30B(2)  	CALL		DELAY_MINI
   950  0002A8   68D2(1)  	B0BSET 		SCL_IO
   951  0002A9   C30B(2)  	CALL		DELAY_MINI
   952  0002AA   0B09(1)  	RLCM 		DATA_IN
   953  0002AB   60D2(1)  	B0BCLR 		SCL_IO
   954  0002AC   2602(1+S)  	DECMS 		TIMEOUT
   955  0002AD   82A0(2)  	JMP 		TMADDRESS_LOOP
   956  0002AE             	
   957  0002AE   61C2(1)  	B0BCLR 		SDATA_CONT
   958  0002AF   C30B(2)  	CALL		DELAY_MINI
   959  0002B0   68D2(1)  	B0BSET 		SCL_IO
   960  0002B1   C30A(2)  	CALL 		CALL_DELAY
   961  0002B2   71D2(1+S)  	B0BTS0 		SDATA_IO
   962  0002B3   C27F(2)  	CALL		I2C_EEROR
   963  0002B4   C30B(2)  	CALL		DELAY_MINI
   964  0002B5   40D2(1)  	BCLR 		SCL_IO
   965  0002B6   49C2(1)  	BSET 		SDATA_CONT
   966  0002B7   0E00(2)  	RET
   967  0002B8             ;**********************TM_READING_DATA********************************
   968  0002B8             TMDATA_ASK:
   969  0002B8   61C2(1)  	B0BCLR 		SDATA_CONT
   970  0002B9   2D08(1)  	MOV 		A,#8
   971  0002BA   1F02(1)  	MOV 		TIMEOUT,A
   972  0002BB             TMDATA_LOOP:
   973  0002BB   2D09(1)  	MOV 		A,#9
   974  0002BC   1F03(1)  	MOV 		TLC0,A
   975  0002BD   C30B(2)  	CALL		DELAY_MINI
   976  0002BE   48D2(1)  	BSET 		SCL_IO
   977  0002BF   C30A(2)  	CALL 		CALL_DELAY
   978  0002C0   71D2(1+S)  	B0BTS0 		SDATA_IO
   979  0002C1   480A(1)  	BSET 		DATA_OUT.0
   980  0002C2   79D2(1+S)  	B0BTS1 		SDATA_IO
   981  0002C3   400A(1)  	BCLR 		DATA_OUT.0
   982  0002C4   0B0A(1)  	RLCM 		DATA_OUT
   983  0002C5   C30B(2)  	CALL		DELAY_MINI
   984  0002C6   60D2(1)  	B0BCLR 		SCL_IO
   985  0002C7   2602(1+S)  	DECMS 		TIMEOUT
   986  0002C8   82BB(2)  	JMP 		TMDATA_LOOP
   987  0002C9   69C2(1)  	B0BSET 		SDATA_CONT
   988  0002CA   5705(1+S)  	BTS0 		ASK_FLAG
   989  0002CB   69D2(1)  	B0BSET 		SDATA_IO
   990  0002CC   5F05(1+S)  	BTS1 		ASK_FLAG
   991  0002CD   61D2(1)  	B0BCLR 		SDATA_IO
   992  0002CE   090A(1)  	RRCM 		DATA_OUT
   993  0002CF   C30B(2)  	CALL		DELAY_MINI
   994  0002D0   48D2(1)  	BSET 		SCL_IO
   995  0002D1   C30B(2)  	CALL		DELAY_MINI
   996  0002D2   40D2(1)  	BCLR		SCL_IO	
   997  0002D3   0E00(2)  	RET
   998  0002D4             ;******************************************************
   999  0002D4             EEADDRESS_ASK:
  1000  0002D4   2D08(1)  	MOV 		A,#8
  1001  0002D5   1F02(1)  	MOV 		TIMEOUT,A
  1002  0002D6             EEADDRESS_LOOP:
  1003  0002D6   5709(1+S)  	BTS0		DATA_IN.7
  1004  0002D7   82DB(2)  	JMP 		EEMD_1
  1005  0002D8   75D2(1+S)  	B0BTS0 		SDA_IO
  1006  0002D9   65D2(1)  	B0BCLR		SDA_IO
  1007  0002DA   82DD(2)  	JMP 		EENEXT_1
  1008  0002DB             EEMD_1:
  1009  0002DB   7DD2(1+S)  	B0BTS1 		SDA_IO
  1010  0002DC   6DD2(1)  	B0BSET		SDA_IO
  1011  0002DD             EENEXT_1:
  1012  0002DD   C30B(2)  	CALL		DELAY_MINI
  1013  0002DE   68D2(1)  	B0BSET 		SCL_IO
  1014  0002DF   C30B(2)  	CALL		DELAY_MINI
  1015  0002E0   0B09(1)  	RLCM 		DATA_IN
  1016  0002E1   60D2(1)  	B0BCLR 		SCL_IO
  1017  0002E2   2602(1+S)  	DECMS 		TIMEOUT
  1018  0002E3   82D6(2)  	JMP 		EEADDRESS_LOOP
  1019  0002E4             	
  1020  0002E4   65C2(1)  	B0BCLR 		SDA_CONT
  1021  0002E5   C30B(2)  	CALL		DELAY_MINI
  1022  0002E6   68D2(1)  	B0BSET 		SCL_IO
  1023  0002E7   C30A(2)  	CALL 		CALL_DELAY
  1024  0002E8   75D2(1+S)  	B0BTS0 		SDA_IO
  1025  0002E9   C27F(2)  	CALL		I2C_EEROR
  1026  0002EA   C30B(2)  	CALL		DELAY_MINI
  1027  0002EB   40D2(1)  	BCLR 		SCL_IO
  1028  0002EC   4DC2(1)  	BSET 		SDA_CONT
  1029  0002ED   0E00(2)  	RET
  1030  0002EE             ;****************************************
  1031  0002EE             EEDATA_ASK:
  1032  0002EE   65C2(1)  	B0BCLR 		SDA_CONT
  1033  0002EF   2D08(1)  	MOV 		A,#8
  1034  0002F0   1F02(1)  	MOV 		TIMEOUT,A
  1035  0002F1             EEDATA_LOOP:
  1036  0002F1   2D09(1)  	MOV 		A,#9
  1037  0002F2   1F03(1)  	MOV 		TLC0,A
  1038  0002F3   C30B(2)  	CALL		DELAY_MINI
  1039  0002F4   48D2(1)  	BSET 		SCL_IO
  1040  0002F5   C30A(2)  	CALL 		CALL_DELAY
  1041  0002F6   75D2(1+S)  	B0BTS0 		SDA_IO
  1042  0002F7   480A(1)  	BSET 		DATA_OUT.0
  1043  0002F8   7DD2(1+S)  	B0BTS1 		SDA_IO
  1044  0002F9   400A(1)  	BCLR 		DATA_OUT.0
  1045  0002FA   0B0A(1)  	RLCM 		DATA_OUT
  1046  0002FB   C30B(2)  	CALL		DELAY_MINI
  1047  0002FC   60D2(1)  	B0BCLR 		SCL_IO
  1048  0002FD   2602(1+S)  	DECMS 		TIMEOUT
  1049  0002FE   82F1(2)  	JMP 		EEDATA_LOOP
  1050  0002FF             	
  1051  0002FF   6DC2(1)  	B0BSET 		SDA_CONT
  1052  000300   5705(1+S)  	BTS0 		ASK_FLAG
  1053  000301   6DD2(1)  	B0BSET 		SDA_IO
  1054  000302   5F05(1+S)  	BTS1 		ASK_FLAG
  1055  000303   65D2(1)  	B0BCLR 		SDA_IO
  1056  000304   090A(1)  	RRCM 		DATA_OUT
  1057  000305   C30B(2)  	CALL		DELAY_MINI
  1058  000306   48D2(1)  	BSET 		SCL_IO
  1059  000307   C30B(2)  	CALL		DELAY_MINI
  1060  000308   40D2(1)  	BCLR		SCL_IO	
  1061  000309   0E00(2)  	RET
  1062  00030A             ;*********************delay*****************
  1063  00030A             CALL_DELAY:
  1064  00030A   0E00(2)  	RET
  1065  00030B             DELAY_MINI:;13US
  1066  00030B   2D05(1)  	MOV		A,#0X05
  1067  00030C   1F00(1)  	MOV		DELAYTIME1,A
  1068  00030D             DELAY0:
  1069  00030D   2600(1+S)  	DECMS	DELAYTIME1
  1070  00030E   830D(2)  	JMP		DELAY0
  1071  00030F   0E00(2)  	RET
  1072  000310             	
  1073  000310             DELAY_SHORT:		;50US FOR 0.5US/INSTRUCTION
  1074  000310   2D63(1)  	MOV		A,#0X63
  1075  000311   1F00(1)  	MOV		DELAYTIME1,A
  1076  000312             DELAY1:
  1077  000312   0000(1)  	NOP
  1078  000313   2600(1+S)  	DECMS	DELAYTIME1
  1079  000314   8312(2)  	JMP		DELAY1
  1080  000315   0E00(2)  	RET
  1081  000316             DELAY_LONG:	;>=5MS
  1082  000316             ;WAIT_FOR_A_LONG_WHILE
  1083  000316   2D0A(1)  	MOV		A,#0X0A
  1084  000317   2F00(1)  	B0MOV	DELAYTIME1,A
  1085  000318             DELAY2_1:
  1086  000318   2DC7(1)  	MOV		A,#0XC7
  1087  000319   1F01(1)  	MOV		DELAYTIME2,A
  1088  00031A             DELAY2_2:
  1089  00031A   0000(1)  	NOP
  1090  00031B   2601(1+S)  	DECMS	DELAYTIME2
  1091  00031C   831A(2)  	JMP		DELAY2_2	
  1092  00031D   2600(1+S)  	DECMS	DELAYTIME1
  1093  00031E   8318(2)  	JMP		DELAY2_1
  1094  00031F   0E00(2)  	RET		
  1095  000320             DELAY_LED:		;0.2S
  1096  000320             ;WAIT_FOR_DEEP_DARK_FANTASY
  1097  000320   2DFF(1)  	MOV		A,#0XFF
  1098  000321   1F01(1)  	MOV		DELAYTIME2,A
  1099  000322             DELAY3_1:
  1100  000322   2DFF(1)  	MOV		A,#0XFF
  1101  000323   1F00(1)  	MOV		DELAYTIME1,A
  1102  000324             DELAY3_2:
  1103  000324   0000(1)  	NOP
  1104  000325   0000(1)  	NOP
  1105  000326   2600(1+S)  	DECMS		DELAYTIME1
  1106  000327   8324(2)  	JMP			DELAY3_2
  1107  000328   2601(1+S)  	DECMS		DELAYTIME2
  1108  000329   8322(2)  	JMP			DELAY3_1
  1109  00032A   0E00(2)  	RET
  1110  00032B             OPEN_TC0_INT_FUN:
  1111  00032B   6BDA(1)  	B0BSET	FTC0CKS	;	OUTSIDE INPUT ACCIDENT
  1112  00032C   6ADA(1)  	B0BSET	FALOAD0 ;
  1113  00032D   2DFD(1)  	MOV		A,#0XFD
  1114  00032E   2FCD(1)  	B0MOV	TC0R,A
  1115  00032F   2FDB(1)  	B0MOV	TC0C,A
  1116  000330   65C8(1)  	B0BCLR	FTC0IRQ
  1117  000331   6DC9(1)  	B0BSET	FTC0IEN
  1118  000332   6FDA(1)  	B0BSET	FTC0ENB
  1119  000333   0E00(2)  	RET
  1120  000334             SYS_INIT_FUN:
  1121  000334   2D2D(1)  	MOV			A,#0X2D
  1122  000335   2FC2(1)  	B0MOV		P2M,A
  1123  000336   2D35(1)  	MOV			A,#0X35
  1124  000337   2FD2(1)  	B0MOV		P2,A
  1125  000338             	;up resistor for p2.4
  1126  000338   2D10(1)  	MOV			A,#0X10
  1127  000339   2FE2(1)  	B0MOV		P2UR,A
  1128  00033A   2D01(1)  	MOV			A,#0X01
  1129  00033B   2FC1(1)  	B0MOV		P1M,A
  1130  00033C   2BD1(1)  	CLR			P1
  1131  00033D   68B8(1)  	B0BSET		VSR_CONT
  1132  00033E   60D0(1)  	B0BCLR		VSR_IO
  1133  00033F   68C1(1)  	B0BSET		S_VDD_VCC_CONT
  1134  000340   60D1(1)  	B0BCLR		S_VDD_VCC_IO
  1135  000341   6CC5(1)  	B0BSET		VTM_CONT
  1136  000342   64D5(1)  	B0BCLR		VTM_IO
  1137  000343   2D03(1)  	MOV			A,#0X03
  1138  000344   1F0F(1)  	MOV			CRCT1,A
  1139  000345   C310(2)  	CALL		DELAY_SHORT
  1140  000346   54D2(1+S)  	BTS0		BLEF
  1141  000347   834B(2)  	JMP			SYS_INIT_LED
  1142  000348   4E06(1)  	BSET		BLE_FLAG
  1143  000349   2D02(1)  	MOV			A,#0X02
  1144  00034A   1F0F(1)  	MOV			CRCT1,A
  1145  00034B             SYS_INIT_LED:
  1146  00034B   62D2(1)  	B0BCLR		CLED_IO
  1147  00034C   C320(2)  	CALL		DELAY_LED	
  1148  00034D   6AD2(1)  	B0BSET		CLED_IO
  1149  00034E   C320(2)  	CALL		DELAY_LED
  1150  00034F   260F(1+S)  	DECMS		CRCT1
  1151  000350   834B(2)  	JMP			SYS_INIT_LED
  1152  000351             ;************T0_INIT_START************************************
  1153  000351   2D00(1)  	MOV			A,#0X00
  1154  000352   2FD8(1)  	B0MOV		T0M,A	
  1155  000353   68D8(1)  	B0BSET		FT0TB	; T0 = Fcpu/256,PERIOD TIME IS 2S
  1156  000354   2BD9(1)  	CLR			T0C
  1157  000355   64C8(1)  	B0BCLR		FT0IRQ
  1158  000356   6CC9(1)  	B0BSET		FT0IEN
  1159  000357   6FD8(1)  	B0BSET		FT0ENB
  1160  000358             ;*****************TC0_INIT_START*****************
  1161  000358   2BDA(1)  	CLR			TC0M
  1162  000359   2BDB(1)  	CLR			TC0C
  1163  00035A   65C8(1)  	B0BCLR		FTC0IRQ
  1164  00035B   65C9(1)  	B0BCLR		FTC0IEN
  1165  00035C   67DA(1)  	B0BCLR		FTC0ENB
  1166  00035D             ;************************OPEN P1.1WEEK UP FUNCTION*********************
  1167  00035D   2D02(1)  	MOV			A,#0X02
  1168  00035E   2FC0(1)  	B0MOV		P1W,A
  1169  00035F   C30B(2)  	CALL		DELAY_MINI
  1170  000360   0E00(2)  	RET
  1171  000361             ;//////////////////////////////////////////////////
  1172  000361             SET_EE_TM_FUN:
  1173  000361   65C2(1)  	B0BCLR		SDA_CONT
  1174  000362   64C5(1)  	B0BCLR		VTM_CONT
  1175  000363   60C2(1)  	B0BCLR		SCL_CONT
  1176  000364   61C2(1)  	B0BCLR		SDATA_CONT
  1177  000365   68D0(1)  	B0BSET		VSR_IO
  1178  000366   6BD2(1)  	B0BSET		S_TM_EE_IO
  1179  000367   4A05(1)  	BSET		TM_EE_FLAG
  1180  000368   4406(1)  	BCLR	NOT_QUICK_MODE_FLAG
  1181  000369   0E00(2)  	RET
  1182  00036A             ;////////////////////////////////////////
  1183  00036A             ;////////////SET LOW POWER
  1184  00036A             SET_LOW_POWER_FUN:
  1185  00036A             ;****************************************
  1186  00036A   64C5(1)  	B0BCLR		VTM_CONT
  1187  00036B   63D2(1)  	B0BCLR		S_TM_EE_IO
  1188  00036C   60D0(1)  	B0BCLR		VSR_IO
  1189  00036D   4205(1)  	BCLR		TM_EE_FLAG
  1190  00036E   0E00(2)  	RET
  1191  00036F             ;/////////////////////////////////////////	
  1192  00036F             ;*******************************************
  1193  00036F             	ENDP
